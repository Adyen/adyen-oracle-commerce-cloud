{"version":3,"file":"adyen-checkout.min.js","sources":["constants/index.js","utils/spinner.js","utils/ajax.js","utils/redirectAuth.js","utils/getOrderPayload.js","utils/events.js","utils/getInstallmentOptions.js","utils/checkout.js","utils/modal.js","utils/createError.js","utils/date.js","components/component.js","components/order.js","components/payment.js","components/store.js","components/boleto/index.js","components/card/index.js","components/local/index.js","adyen-checkout.js"],"sourcesContent":["export const baseAPIUrl = '/ccstorex/custom/adyen/v1'\nexport const channels = { preview: 'preview', storefront: 'storefront' }\nexport const errorMessages = {\n    paymentRefused: 'paymentRefused',\n    installmentsConfiguration: 'installmentsConfiguration',\n    failed3dsValidation: 'failed3dsValidation',\n}\nexport const paymentMethodTypes = {\n    generic: 'generic',\n    invoice: 'invoice',\n    local: 'local',\n}\nexport const adyenCheckoutComponentUrl = 'https://checkoutshopper-live.adyen.com/checkoutshopper/sdk/3.3.0/adyen.js'\nexport const locale = 'locale'\nexport const countries = {\n    brazil: { locale: 'pt_br', currency: 'brl' },\n    mexico: { locale: 'es_mx', currency: 'mxn' },\n}\nexport const brazilEnabled = 'brazilEnabled'\nexport const comboCards = { debit: 'debitCard', credit: 'creditCard' }\nexport const bins = { electron: 'electron', maestro: 'maestro' }\nexport const storage = { paymentData: 'AdyenPaymentData', order: 'AdyenOrder' }\nexport const noInstallmentsMsg = 'noInstallmentsMsg'\n\nexport const render = 'render'\nexport const id = 'id'\nexport const order = 'order'\nexport const checkout = {\n    card: 'checkoutCard',\n    boleto: 'checkoutBoleto',\n    local: 'checkoutLocal',\n}\nexport const isLoaded = 'isLoaded'\nexport const ajax = 'ajax'\nexport const originKey = 'originKey'\nexport const installments = 'installments'\nexport const cart = 'cart'\nexport const setPayment = 'setPayment'\nexport const setDone = 'setDone'\nexport const initialOrderCreated = 'initialOrderCreated'\nexport const pageChanged = 'pageChanged'\nexport const installmentsEnabled = 'installmentsEnabled'\nexport const isAllowedCountryForInstallments = 'isAllowedCountryForInstallments'\nexport const environment = 'environment'\nexport const selectedBrand = 'selectedBrand'\nexport const selectedComboCard = 'selectedComboCard'\nexport const installmentsOptions = 'installmentOptions'\nexport const storedPaymentType = 'storedPaymentType'\nexport const paymentMethodsResponse = 'paymentMethodsResponse'\nexport const translate = 'translate'\nexport const isPaymentStored = 'isPaymentStored'\nexport const paymentDetails = 'paymentDetails'\nexport const selectedInstallment = 'selectedInstallment'\nexport const comboCardOptions = 'comboCardOptions'\nexport const genericPayment = 'genericPayment'\nexport const isDone = 'isDone'\nexport const isValid = 'isValid'\nexport const pageParams = 'pageParams'\nexport const presentToShopper = 'PresentToShopper'\nexport const orderPayload = 'orderPayload'\nexport const boleto = {\n    enabled: 'boletoEnabled',\n    deliveryDate: 'boletoDeliveryDate',\n    shopperStatement: 'boletoShopperStatement',\n}\nexport const localPaymentMethods = 'localPaymentMethods'\n","import spinner from 'spinner'\nimport $ from 'jquery'\n\nexport const createSpinner = () => {\n    const indicatorOptions = {\n        parent: '#loadingModal',\n        posTop: '20%',\n        posLeft: '50%',\n        loadingText: 'Loading',\n    }\n    $('#loadingModal').removeClass('hide')\n    $('#loadingModal').show()\n    spinner.create(indicatorOptions)\n}\n\nexport const destroySpinner = () => {\n    $('#loadingModal').hide()\n    spinner.destroy()\n}\n","import $ from 'jquery'\nimport { baseAPIUrl, channels } from '../constants'\n\nexport default isPreview => {\n    return (path, cb, method = 'get') => {\n        $.ajax({\n            url: `${baseAPIUrl}/${path}`,\n            method,\n            headers: {\n                'x-oracle-cc-webhook-signature': 'ABC123',\n                channel: isPreview ? channels.preview : channels.storefront,\n            },\n            success: cb,\n        })\n    }\n}\n","import storageApi from 'storageApi'\nimport * as constants from '../constants'\nimport { store } from '../components'\nimport { createFromAction } from './index'\n\nexport default ({ order, customPaymentProperties }, cb) => {\n    const checkoutCard = store.get(constants.checkout.card)\n    const isAuthRedirect = 'paymentData' in customPaymentProperties\n    const redirect = () => {\n        const action = {\n            action: customPaymentProperties,\n            selector: '#adyen-card-payment',\n            checkoutComponent: checkoutCard,\n        }\n\n        const instance = storageApi.getInstance()\n        instance.setItem(constants.storage.paymentData, customPaymentProperties.paymentData)\n        instance.setItem(constants.storage.order, JSON.stringify(order))\n\n        createFromAction(action)\n    }\n\n    isAuthRedirect ? redirect() : cb(order)\n}\n","export default function getOrderPayload(order) {\n    const { shippingAddress: shippingAddressFn, billingAddress: billingAddressFn, cart, payments } = order()\n\n    const { billingAddress, shippingAddress, id, orderProfileId, shippingMethod, shoppingCart } = order().order()\n\n    return {\n        billingAddress: {\n            ...billingAddressFn(),\n            ...billingAddress,\n        },\n        combineLineItems: cart().combineLineItems,\n        op: 'initiate',\n        id,\n        payments: payments(),\n        profileId: orderProfileId,\n        shippingAddress: {\n            ...shippingAddressFn(),\n            ...shippingAddress,\n        },\n        shippingMethod,\n        shoppingCart,\n    }\n}\n","import $ from 'jquery'\n\nclass Emitter {\n    store = {\n        emit: (key, value) => $.Topic('store').publish(key, value),\n        listen: cb => $.Topic('store').subscribe(cb),\n    }\n\n    _ev = suffix => ({\n        emit: (event, ...args) => $.Topic(`${suffix}-${event}`).publish(...args),\n        on: (event, cb) => $.Topic(`${suffix}-${event}`).subscribe(cb),\n    })\n\n    emit = (key, ...args) => $.Topic(key).publish(...args)\n\n    payment = this._ev('payment')\n    order = this._ev('order')\n    component = this._ev('component')\n\n    on = (event, cb) => $.Topic(event).subscribe(cb)\n}\n\nexport default new Emitter()\n","const creditCards = [\n    { id: 1, name: 'Amex', code: 'amex' },\n    // {id: \"argencard\", name: \"Argencard\"},\n    // {id: \"bcmc\", name: \"Bancontact/Mister Cash\"},\n    // {id: \"bijcard\", name: \"de Bijenkorf Card\"},\n    // {id: \"cabal\", name: \"Cabal\"},\n    // {id: \"cartebancaire\", name: \"Carte Bancaires\"},\n    // {id: \"codensa\", name: \"Codensa\"},\n    // {id: \"cup\", name: \"China Union Pay\"},\n    // {id: \"dankort\", name: \"Dankort\"},\n    // {id: \"diners\", name: \"Diners Club\"},\n    // {id: \"discover\", name: \"Discover\"},\n    { id: 2, name: 'ELO', code: 'elo' },\n    // {id: \"forbrugsforeningen\", name: \"Forbrugsforeningen\"},\n    { id: 4, name: 'HiperCard', code: 'hiper' },\n    { id: 4, name: 'HiperCard', code: 'hipercard' },\n    // {id: \"jcb\", name: \"JCB\"},\n    // {id: \"karenmillen\", name: \"Karen Millen GiftCard\"},\n    // {id: \"laser\", name: \"Laser\"},\n    // {id: \"maestro\", name: \"Maestro\"},\n    // {id: \"maestrouk\", name: \"Maestro UK\"},\n    { id: 8, name: 'Mastercard', code: 'mc' },\n    // {id: \"mcalphabankbonus\", name: \"Alpha Bank Mastercard Bonus\"},\n    // {id: \"mir\", name: \"MIR\"},\n    // {id: \"naranja\", name: \"Naranja\"},\n    // {id: \"oasis\", name: \"Oasis GiftCard\"},\n    // {id: \"shopping\", name: \"Tarjeta Shopping\"},\n    // {id: \"solo\", name: \"Solo\"},\n    // {id: \"troy\", name: \"Troy\"},\n    // {id: \"uatp\", name: \"UATP\"},\n    { id: 16, name: 'Visa', code: 'visa' },\n    // {id: \"visaalphabankbonus\", name: \"Alpha Bank Visa Bonus\"},\n    // {id: \"visadankort\", name: \"Visa Dankort\"},\n    // {id: \"warehouse\", name: \"Warehouse GiftCard\"},\n]\n\nconst isAllowedCreditCard = (creditCard, creditCardSum) => (parseInt(creditCardSum) & creditCard.id) !== 0\nconst checkSum = (creditCard, creditCardSum) => creditCard && isAllowedCreditCard(creditCard, creditCardSum)\nconst checkAmount = (amount, amountRange) => amount >= amountRange\nconst validate = (hasValidSum, isValidAmount) => hasValidSum && isValidAmount\n\nfunction getInstallmentOptions(installmentsOptions, amount, brand) {\n    const creditCard = creditCards.find(({ code }) => brand === code)\n    const createInstallmentsObj = item => {\n        const [amountRange, numberOfInstallments, creditCardSum] = item\n        const hasValidSum = checkSum(creditCard, creditCardSum)\n        const isValidAmount = checkAmount(amount, amountRange)\n        const isValid = validate(hasValidSum, isValidAmount)\n\n        return isValid && { numberOfInstallments }\n    }\n\n    return installmentsOptions.map(createInstallmentsObj, []).filter(valid => valid)\n}\n\nexport default getInstallmentOptions\n","import ccConstants from 'ccConstants'\nimport { store } from '../components'\nimport * as constants from '../constants'\nimport { eventEmitter } from './index'\n\nexport const getDefaultConfig = () => {\n    const environment = store.get(constants.environment)\n    const locale = store.get(constants.locale)\n    const originKey = store.get(constants.originKey)\n    const paymentMethodsResponse = store.get(constants.paymentMethodsResponse)\n\n    return {\n        showPayButton: true,\n        locale,\n        environment: environment.toLowerCase(),\n        originKey,\n        paymentMethodsResponse,\n    }\n}\n\nexport const createFromAction = ({ action, selector, checkoutComponent }) => {\n    checkoutComponent.createFromAction(action).mount(selector)\n}\n\nclass Checkout {\n    constructor(type) {\n        this.type = type\n    }\n\n    createCheckout = ({ configuration, selector, type, options = {} }, cb) => {\n        const defaultConfiguration = getDefaultConfig()\n        // eslint-disable-next-line no-undef\n        const checkout = new AdyenCheckout({ ...defaultConfiguration, ...configuration })\n        checkout.create(type, options).mount(selector)\n\n        cb(checkout)\n    }\n\n    onSubmit = () => () => {\n        const loader = document.querySelector(`#adyen-${this.type}-wrapper .loader-wrapper`)\n        loader && loader.classList.toggle('hide', false)\n\n        const order = store.get(constants.order)\n        eventEmitter.payment.emit(constants.setPayment, this.type)\n\n        order().id(null)\n        order().op(ccConstants.ORDER_OP_INITIATE)\n        order().handlePlaceOrder()\n    }\n\n    onChange = options => (state, component) => {\n        const paymentDetails = store.get(constants.paymentDetails)\n        const isValid = component.isValid && typeof state.data === 'object'\n        eventEmitter.store.emit(constants.isValid, isValid)\n\n        const payload = { ...paymentDetails, [this.type]: { ...state.data, ...options } }\n\n        eventEmitter.store.emit(constants.paymentDetails, payload)\n    }\n}\n\nexport default Checkout\n","export const createPresentToShopperModal = cb => {\n    const node = document.createElement('div')\n    node.setAttribute(\n        'style',\n        'display: flex;justify-content: center;align-content: center;top: 0;position: fixed;z-index: 999;' +\n            'align-items: center;'\n    )\n\n    const wrapper = document.createElement('div')\n    wrapper.setAttribute('style', 'height: 100vh; width: 100vw; background-color: #a4a4a494; z-index: 999;')\n    wrapper.setAttribute('id', 'present-shopper-wrapper')\n\n    const modal = document.createElement('div')\n    modal.setAttribute('id', 'present-shopper')\n    modal.setAttribute('style', 'z-index: 9999;position: absolute;')\n\n    const clickEvent = () => {\n        wrapper.removeEventListener('click', clickEvent)\n        node.remove()\n    }\n\n    wrapper.addEventListener('click', clickEvent)\n\n    node.innerHTML =\n        '<link rel=\"stylesheet\" href=\"https://checkoutshopper-live.adyen.com/checkoutshopper/sdk/3.2.0/adyen.css\" />'\n    node.appendChild(modal)\n    node.appendChild(wrapper)\n\n    document.body.appendChild(node)\n    cb(node)\n}\n","import notifier from 'notifier'\nimport navigation from 'navigation'\nimport { destroySpinner } from './spinner'\n\nconst createError = (options, preserveUrl = false) => ({ errorMessage = 'The payment is REFUSED.' } = {}) => {\n    'redirectLink' in options && navigation.goTo(options.redirectLink, preserveUrl)\n    destroySpinner()\n    notifier.sendError('adyen', errorMessage, true)\n}\n\nexport default createError\n","export const addDays = days => new Date().setDate(new Date().getDate() + days)\n","import $ from 'jquery'\nimport * as constants from '../constants'\nimport { eventEmitter } from '../utils'\nimport { createBoletoCheckout, createCardCheckout, createLocalPaymentCheckout, store } from './index'\n\nclass Component {\n    constructor() {\n        this.startEventListeners()\n    }\n\n    startEventListeners = () => {\n        eventEmitter.component.on(constants.render, this.render)\n        eventEmitter.component.on(constants.comboCardOptions, this.getComboCardOptions)\n    }\n\n    getBrand = (brands, brand) =>\n        brand in brands ? brands[store.get(constants.selectedBrand)] : store.get(constants.selectedBrand)\n    getComboCardOptions = () => {\n        const brands = { visa: constants.bins.electron, mastercard: constants.bins.maestro }\n        const selectedComboCard = store.get(constants.selectedComboCard)()\n        const isDebitCard = selectedComboCard === constants.comboCards.debit\n        const brand = store.get(constants.selectedBrand)\n        const selectedBrand = this.getBrand(brands, brand)\n\n        const options = { selectedBrand, additionalData: { overwriteBrand: true } }\n\n        eventEmitter.store.emit(constants.comboCardOptions, isDebitCard ? options : {})\n    }\n\n    getOriginKeysSuccessResponse = originKeysRes => {\n        const { origin } = window.location\n        eventEmitter.store.emit(constants.originKey, originKeysRes.originKeys[origin])\n        store.get(constants.ajax)('paymentMethods', this.getPaymentMethods)\n    }\n\n    render = () => {\n        store.get(constants.ajax)('originKeys', this.getOriginKeysSuccessResponse)\n    }\n\n    getPaymentMethods = paymentMethodsResponse => {\n        eventEmitter.store.emit(constants.paymentMethodsResponse, paymentMethodsResponse)\n\n        $.getScript(constants.adyenCheckoutComponentUrl, () => {\n            createCardCheckout()\n            createLocalPaymentCheckout(paymentMethodsResponse)\n            store.get(constants.brazilEnabled) && createBoletoCheckout()\n        })\n    }\n}\n\nexport default Component\n","import $ from 'jquery'\nimport ccRestClient from 'ccRestClient'\nimport ccConstants from 'ccConstants'\nimport storageApi from 'storageApi'\nimport pubsub from 'pubsub'\nimport { redirectAuth, createSpinner, getOrderPayload, eventEmitter } from '../utils'\nimport * as constants from '../constants'\nimport { store } from './index'\n\nclass Order {\n    constructor() {\n        this.instance = storageApi.getInstance()\n\n        this.startEventListeners()\n    }\n\n    startEventListeners = () => {\n        eventEmitter.order.on(constants.pageChanged, this.getUrlParametersAndCreateOrder)\n        eventEmitter.order.on(constants.initialOrderCreated, this.initialOrderCreated)\n    }\n\n    initialOrderCreated = orderEvent => {\n        const order = store.get(constants.order)\n        const { customPaymentProperties } = orderEvent.order.payments[0]\n        const { data, resultCode } = customPaymentProperties\n\n        const payload = { order: getOrderPayload(order), customPaymentProperties: JSON.parse(data), resultCode }\n\n        eventEmitter.store.emit(constants.orderPayload, payload)\n        const isDone = store.get(constants.isDone)\n        !isDone() && redirectAuth(payload, this.createOrder)\n    }\n\n    getAndCreatOrder = result => {\n        result.paymentData = this.instance.getItem(constants.storage.paymentData)\n\n        const payment = { type: 'generic', customProperties: result }\n\n        this.recreateOrder(payment)\n    }\n\n    createOrder = orderPayload => {\n        const orderFail = ({ message = 'Failed to create order' } = {}) => {\n            $.Topic(pubsub.topicNames.ORDER_SUBMISSION_FAIL).publish({ message: 'fail', errorMessage: message })\n        }\n\n        const completeOrder = ({ id, uuid }) => {\n            eventEmitter.store.emit(constants.isDone, true)\n            const publishData = { message: 'success', id, uuid }\n            $.Topic(pubsub.topicNames.ORDER_COMPLETED).publish(publishData)\n            $.Topic(pubsub.topicNames.ORDER_SUBMISSION_SUCCESS).publish([publishData])\n        }\n\n        const submitOrder = data => {\n            const orderIsCompleted = orderPayload.op === 'complete'\n            const completedPayload = { ...orderPayload, op: 'complete' }\n            return orderIsCompleted ? completeOrder(data) : this.createOrder(completedPayload)\n        }\n\n        const orderSuccess = data => {\n            const { paymentState, message } = data.payments[0]\n            const { PAYMENT_GROUP_STATE_AUTHORIZED, PAYMENT_GROUP_STATE_INITIAL } = ccConstants\n            const validPaymentGroups = [PAYMENT_GROUP_STATE_AUTHORIZED, PAYMENT_GROUP_STATE_INITIAL]\n            const isValid = validPaymentGroups.includes(paymentState)\n            return isValid ? submitOrder(data) : orderFail({ message, data })\n        }\n\n        ccRestClient.request(ccConstants.ENDPOINT_ORDERS_CREATE_ORDER, orderPayload, orderSuccess, orderFail)\n    }\n\n    recreateOrder = paymentData => {\n        const storedOrder = JSON.parse(this.instance.getItem(constants.storage.order))\n        storedOrder.payments = [paymentData]\n\n        this.createOrder(storedOrder)\n    }\n\n    getResult = urlParameters => {\n        const params = urlParameters.split('&')\n        const formatResult = (acc, param) => {\n            const [key, value] = param.split('=')\n            return { ...acc, [key]: decodeURIComponent(value) }\n        }\n\n        return params.reduce(formatResult, {})\n    }\n\n    getUrlParametersAndCreateOrder = pageData => {\n        const order = store.get(constants.order)\n        const { parameters } = pageData\n\n        if (parameters) {\n            createSpinner()\n\n            const parametersObj = this.getResult(parameters)\n\n            this.cleanPaymentGatewayType(order)\n            this.setAction(parametersObj)\n        }\n    }\n\n    cleanPaymentGatewayType = order => {\n        if (order().paymentGateway()) {\n            order().paymentGateway().type = ''\n        }\n    }\n\n    setAction(parametersObj) {\n        this.isAction = this.hasParameters(parametersObj)\n        this.isAction && this.getAndCreatOrder(parametersObj)\n    }\n    checkIf3ds = parametersObj => 'PaRes' in parametersObj && 'MD' in parametersObj\n    checkIfLocal = parametersObj => 'payload' in parametersObj\n    hasParameters = parametersObj => {\n        const is3DS = this.checkIf3ds(parametersObj)\n        const isLocal = this.checkIfLocal(parametersObj)\n        const hasDetails = is3DS || isLocal\n        return hasDetails\n    }\n}\n\nexport default Order\n","import * as constants from '../constants'\nimport { eventEmitter } from '../utils'\nimport { store } from './index'\n\nclass Payment {\n    constructor() {\n        this.startEventListeners()\n    }\n\n    startEventListeners = () => {\n        eventEmitter.payment.on(constants.setPayment, this.setPayment)\n    }\n\n    setPayment = type => {\n        const order = store.get(constants.order)\n        const id = store.get(constants.id)\n\n        const genericPayment = store.get(constants.genericPayment)\n        const updatedGenericPayment = { ...genericPayment, id: id() }\n\n        eventEmitter.store.emit(constants.genericPayment, updatedGenericPayment)\n        eventEmitter.component.emit(constants.comboCardOptions)\n\n        const payments = [updatedGenericPayment]\n\n        order().updatePayments(payments)\n\n        this.updatePayment(this.createPayment(type))\n    }\n\n    updatePayment = pPayment => {\n        const order = store.get(constants.order)\n        const id = store.get(constants.id)\n\n        const payments = order().payments()\n        const checkId = (curId, id) => curId && curId === id()\n        const setPayments = (payment, index) => {\n            const curPayment = payments[index]\n            const { id: curId } = curPayment\n            const isSameId = checkId(curId, id)\n            return isSameId ? pPayment : curPayment\n        }\n\n        const newPayments = payments.map(setPayments)\n        order().payments(newPayments)\n    }\n\n    createPayment = type => {\n        const storedPaymentType = store.get(constants.storedPaymentType)\n        const isPaymentStored = store.get(constants.isPaymentStored)\n        const paymentDetails = store.get(constants.paymentDetails)\n        const selectedInstallment = store.get(constants.selectedInstallment)\n        const selectedComboCard = store.get(constants.selectedComboCard)\n        const comboCardOptions = store.get(constants.comboCardOptions)\n\n        const hasInstallments = this.checkSelectedInstallment(selectedInstallment)\n\n        const isCreditCard = selectedComboCard() === constants.comboCards.credit\n        const isValid = this.validateInstallment(hasInstallments, isCreditCard)\n\n        const storedPayment = this.getStoredPayment(isPaymentStored, storedPaymentType)\n        const numberOfInstallments = this.getInstallments(isValid, selectedInstallment)\n\n        const genericPayment = store.get(constants.genericPayment)\n        const customProperties = {\n            paymentDetails: paymentDetails[type],\n            storedPayment,\n            ...(numberOfInstallments && { numberOfInstallments }),\n            ...comboCardOptions,\n        }\n        const updatedGenericPayment = { ...genericPayment, customProperties }\n\n        return updatedGenericPayment\n    }\n\n    checkSelectedInstallment = selectedInstallment =>\n        selectedInstallment() && 'numberOfInstallments' in selectedInstallment()\n    getInstallments = (isValid, selectedInstallment) => isValid && parseInt(selectedInstallment().numberOfInstallments)\n    validateInstallment = (hasInstallments, isCreditCard) => hasInstallments && isCreditCard\n    getStoredPayment = (isPaymentStored, storedPaymentType) => (isPaymentStored ? storedPaymentType() : '')\n}\n\nexport default Payment\n","import ko from 'knockout'\nimport { comboCards, noInstallmentsMsg, countries } from '../constants'\nimport { ajax, eventEmitter } from '../utils'\nimport { Component, Order, Payment } from './index'\n\nclass Store {\n    constructor() {\n        this.startEventListeners()\n    }\n\n    brazilEnabled = false\n\n    storedPaymentType = ko.observable('')\n    environment = undefined\n    pageParams = undefined\n\n    // Component\n    component = new Component()\n    checkout = undefined\n    originKey = ''\n    isValid = false\n    selectedBrand = undefined\n    creditCard = comboCards.credit\n    debitCard = comboCards.debit\n    comboCards = ko.observable([comboCards.credit, comboCards.debit])\n    comboCardOptions = {}\n    selectedComboCard = ko.observable(comboCards.credit)\n    isPaymentStored = ko.observable(false)\n    paymentMethodsResponse = undefined\n    paymentDetails = undefined\n    isLoaded = ko.observable(false)\n    installments = ko.observable([])\n    selectedInstallment = ko.observable({})\n    installmentsAllowedCountries = [countries.mexico.locale, countries.brazil.locale]\n    installmentsOptions = []\n\n    // Payment\n    paymentComponent = new Payment()\n    genericPayment = { type: 'generic' }\n\n    // Order\n    orderComponent = new Order()\n    isDone = ko.observable(false)\n\n    // Boleto\n    boletoEnabled = false\n    boletoDeliveryDate = ''\n    boletoShopperStatement = ''\n\n    // Local\n    checkoutLocal = ko.observable([])\n    localPaymentMethods = ko.observableArray()\n\n    get installmentsEnabled() {\n        const hasInstallments = !!this.installments().length\n        const cardIsCredit = this.selectedComboCard() === comboCards.credit\n        return ko.observable(this.isAllowedCountryForInstallments && hasInstallments && cardIsCredit)\n    }\n\n    get isAllowedCountryForInstallments() {\n        return this.installmentsAllowedCountries.includes(this.locale.toLowerCase())\n    }\n\n    startEventListeners = () => {\n        eventEmitter.store.listen((key, value) => {\n            if (typeof this[key] === 'function') {\n                this[key](value)\n            } else {\n                this[key] = value\n            }\n        })\n    }\n\n    get = key => (this.has(key) ? this[key] : undefined)\n\n    has = key => key in this\n\n    init = viewModel => {\n        this.id = viewModel.id\n        this.order = viewModel.order\n        this.cart = viewModel.cart\n        this.ajax = ajax(viewModel.isPreview())\n        this.translate = viewModel.translate\n        this.locale = viewModel.locale()\n        this.noInstallmentsMsg = viewModel.translate(noInstallmentsMsg)\n    }\n}\n\nexport default new Store()\n","import * as constants from '../../constants'\nimport { addDays, Checkout, createPresentToShopperModal, eventEmitter, createFromAction } from '../../utils'\nimport { store } from '../index'\n\nconst setDeliveryDate = boletoDeliveryDate => {\n    boletoDeliveryDate && eventEmitter.store.emit(constants.boleto.deliveryDate, boletoDeliveryDate)\n}\n\nconst setShopperStatement = boletoShopperStatement => {\n    boletoShopperStatement && eventEmitter.store.emit(constants.boleto.shopperStatement, boletoShopperStatement)\n}\n\nexport const setBoletoConfig = ({ paymentMethodTypes, boletoDeliveryDate, boletoShopperStatement }) => {\n    const hasBoleto = paymentMethodTypes.includes(constants.paymentMethodTypes.invoice)\n    eventEmitter.store.emit(constants.boleto.enabled, hasBoleto)\n\n    if (hasBoleto) {\n        setDeliveryDate(boletoDeliveryDate)\n        setShopperStatement(boletoShopperStatement)\n    }\n}\n\nexport const presentToShopper = customPaymentProperties => {\n    const checkoutBoleto = store.get(constants.checkout.boleto)\n    const options = { action: customPaymentProperties, selector: '#present-shopper', checkoutComponent: checkoutBoleto }\n\n    createPresentToShopperModal(() => {\n        createFromAction(options)\n    })\n}\n\nconst createBoletoCheckout = () => {\n    const checkout = new Checkout(constants.paymentMethodTypes.invoice)\n    const onChange = checkout.onChange({\n        deliveryDate: addDays(store.get(constants.boleto.deliveryDate)),\n        shopperStatement: store.get(constants.boleto.shopperStatement),\n    })\n\n    const onSubmit = checkout.onSubmit()\n\n    const configuration = { onSubmit, onChange }\n    const order = store.get(constants.order)\n\n    const address = order().billingAddress()\n\n    const shopperName = { firstName: address.firstName(), lastName: address.lastName() }\n    const billingAddress = {\n        city: address.city(),\n        country: address.selectedCountry(),\n        // houseNumberOrName:\"952\",\n        postalCode: address.postalCode(),\n        stateOrProvince: address.selectedState(),\n        street: address.address1(),\n    }\n    const options = { data: { shopperName, billingAddress } }\n    const checkoutOptions = { configuration, selector: '#adyen-boleto-payment', type: 'boletobancario', options }\n\n    checkout.createCheckout(checkoutOptions, checkout => {\n        eventEmitter.store.emit(constants.checkout.boleto, checkout)\n    })\n}\n\nexport default createBoletoCheckout\n","import { store } from '../index'\nimport * as constants from '../../constants'\nimport { Checkout, eventEmitter, getInstallmentOptions } from '../../utils'\n\nexport const onBrand = ({ brand }) => {\n    eventEmitter.store.emit(constants.selectedBrand, brand)\n    const installmentsOptions = store.get(constants.installmentsOptions)\n    const cart = store.get(constants.cart)\n    const amount = cart().amount()\n    const installments = installmentsOptions ? getInstallmentOptions(installmentsOptions, amount, brand) : []\n\n    eventEmitter.store.emit(constants.installments, installments)\n}\n\nexport const onConfigSuccess = () => eventEmitter.store.emit(constants.isLoaded, true)\n\nconst createCardCheckout = () => {\n    const checkout = new Checkout(constants.paymentMethodTypes.generic)\n    const onChange = checkout.onChange()\n    const onSubmit = checkout.onSubmit()\n\n    const storedPaymentType = store.get(constants.storedPaymentType)\n    const options = { hasHolderName: false, enableStoreDetails: !!storedPaymentType() }\n\n    const configuration = { onBrand, onConfigSuccess, onChange, onSubmit }\n    const checkoutOptions = { configuration, selector: '#adyen-card-payment', type: 'card', options }\n\n    checkout.createCheckout(checkoutOptions, checkout => {\n        eventEmitter.store.emit(constants.checkout.card, checkout)\n    })\n}\n\nexport default createCardCheckout\n","import * as constants from '../../constants'\nimport { Checkout, eventEmitter } from '../../utils'\n\nconst hasType = paymentMethod => 'type' in paymentMethod\nconst isNotScheme = paymentMethod => hasType(paymentMethod) && paymentMethod.type !== 'scheme'\nconst hasDetails = paymentMethod => isNotScheme(paymentMethod) && 'details' in paymentMethod\nconst hasOneItem = paymentMethod => hasDetails(paymentMethod) && paymentMethod.details.length === 1\nconst getDetail = paymentMethod => hasOneItem(paymentMethod) && paymentMethod.details[0]\nconst isValid = (paymentMethod, key, value) => getDetail(paymentMethod) && getDetail(paymentMethod)[key] === value\n\nconst isLocalPaymentMethod = paymentMethod => {\n    const isIssuer = isValid(paymentMethod, 'key', 'issuer')\n    const isSelect = isValid(paymentMethod, 'type', 'select')\n    const isLocal = isIssuer && isSelect\n\n    return isLocal\n}\n\nconst createLocalCheckout = (acc, localPaymentMethod) => {\n    const { type } = localPaymentMethod\n    const checkout = new Checkout(type)\n    const onChange = checkout.onChange()\n    const onSubmit = checkout.onSubmit()\n\n    const configuration = { onSubmit, onChange, showPayButton: true }\n\n    const checkoutOptions = type => ({ configuration, selector: `#adyen-${type}-payment`, type })\n    checkout.createCheckout(checkoutOptions(type), checkout => ({ ...acc, [type]: checkout }))\n}\n\nconst createLocalPaymentCheckout = ({ paymentMethods }) => {\n    const localPaymentMethods = paymentMethods.filter(isLocalPaymentMethod)\n    eventEmitter.store.emit(constants.localPaymentMethods, localPaymentMethods)\n    const localPaymentMethodsCheckout = localPaymentMethods.reduce(createLocalCheckout, {})\n\n    eventEmitter.store.emit(constants.checkout.local, localPaymentMethodsCheckout)\n}\n\nexport default createLocalPaymentCheckout\n","import pubsub from 'pubsub'\nimport notifier from 'notifier'\nimport $ from 'jquery'\nimport { store } from './components'\nimport { createSpinner, destroySpinner, eventEmitter } from './utils'\nimport createError from './utils/createError'\nimport * as constants from './constants'\nimport { presentToShopper, setBoletoConfig } from './components'\n\nclass ViewModel {\n    store = store\n\n    setGatewaySettings = ({\n        installmentsOptionsId,\n        environment,\n        storedPayment,\n        boletoDeliveryDate,\n        boletoShopperStatement,\n        paymentMethodTypes,\n    }) => {\n        eventEmitter.store.emit(constants.environment, environment)\n\n        store.get(constants.isAllowedCountryForInstallments) && this.setInstallments(installmentsOptionsId)\n        eventEmitter.store.emit(constants.storedPaymentType, storedPayment)\n\n        setBoletoConfig({\n            boletoDeliveryDate: Number(boletoDeliveryDate),\n            boletoShopperStatement,\n            paymentMethodTypes,\n        })\n    }\n\n    setSiteSettings = () => {\n        this.setSiteCountryAndCurrency()\n\n        const { AdyenGenericGateway } = this.site().extensionSiteSettings\n        this.setGatewaySettings(AdyenGenericGateway)\n    }\n\n    setInstallments = installmentsOptions => {\n        try {\n            eventEmitter.store.emit(constants.installmentsOptions, JSON.parse(installmentsOptions))\n        } catch (e) {\n            const translate = store.get(constants.translate)\n            const { installmentsConfiguration } = constants.errorMessages\n            const errMsg = translate(installmentsConfiguration)\n            notifier.sendError('installments', errMsg, true)\n        }\n    }\n\n    setSiteCountryAndCurrency = () => {\n        const { brazil } = constants.countries\n        const { currency, locale } = brazil\n\n        const siteLocale = store.get(constants.locale).toLowerCase()\n        const currencyCode = this.cart().currencyCode()\n        const localeIsBr = locale === siteLocale\n        const curIsBr = currencyCode.toLowerCase() === currency\n\n        eventEmitter.store.emit(constants.brazilEnabled, localeIsBr && curIsBr)\n    }\n\n    handlePageChanged = pageData => {\n        const isCheckout = pageData.pageId === 'checkout'\n        isCheckout && eventEmitter.order.emit(constants.pageChanged, pageData)\n    }\n\n    beforeAppear = () => {\n        this.reset()\n    }\n\n    onLoad = widget => {\n        store.init(widget)\n        Object.assign(this, widget, { store })\n\n        this.setSiteSettings()\n        this.subscribeToTopics()\n    }\n\n    onRender = () => {\n        eventEmitter.component.emit(constants.render)\n    }\n\n    reset = () => {\n        eventEmitter.store.emit(constants.installments, [])\n    }\n\n    orderSubmitted = () => {\n        if (store.has(constants.orderPayload)) {\n            const { resultCode, customPaymentProperties } = store.get(constants.orderPayload)\n            const isPresentToShopper = resultCode === constants.presentToShopper\n            isPresentToShopper && presentToShopper(customPaymentProperties)\n        }\n    }\n\n    subscribeToTopics = () => {\n        const {\n            ORDER_CREATED_INITIAL,\n            ORDER_CREATE,\n            ORDER_SUBMISSION_FAIL,\n            ORDER_COMPLETED,\n            ORDER_CREATED,\n            PAGE_CHANGED,\n            ORDER_SUBMISSION_SUCCESS,\n            NOTIFICATION_ADD,\n        } = pubsub.topicNames\n\n        const emitInitialOrder = ev => {\n            eventEmitter.order.emit(constants.initialOrderCreated, ev)\n        }\n        $.Topic(ORDER_CREATED_INITIAL).subscribe(emitInitialOrder)\n        $.Topic(ORDER_CREATE).subscribe(createSpinner)\n\n        const redirectLink = this.order().checkoutLink\n        const errorCallback = createError({ redirectLink })\n\n        $.Topic(ORDER_SUBMISSION_FAIL).subscribe(errorCallback)\n        $.Topic(ORDER_COMPLETED).subscribe(destroySpinner)\n        $.Topic(ORDER_CREATED).subscribe(this.reset)\n        $.Topic(PAGE_CHANGED).subscribe(this.handlePageChanged)\n        $.Topic(ORDER_SUBMISSION_SUCCESS).subscribe(this.orderSubmitted)\n\n        const hideLoaders = () => {\n            const toggleElementAttribute = el => el.classList.toggle('hide', true)\n            document.querySelectorAll('.loader-wrapper').forEach(toggleElementAttribute)\n        }\n\n        $.Topic(NOTIFICATION_ADD).subscribe(hideLoaders)\n    }\n}\n\nconst vm = new ViewModel()\nexport default vm\n"],"names":["baseAPIUrl","channels","preview","storefront","errorMessages","paymentRefused","installmentsConfiguration","failed3dsValidation","paymentMethodTypes","generic","invoice","local","adyenCheckoutComponentUrl","locale","countries","brazil","currency","mexico","brazilEnabled","comboCards","debit","credit","bins","electron","maestro","storage","paymentData","order","noInstallmentsMsg","render","id","checkout","card","boleto","isLoaded","ajax","originKey","installments","cart","setPayment","initialOrderCreated","pageChanged","isAllowedCountryForInstallments","environment","selectedBrand","selectedComboCard","installmentsOptions","storedPaymentType","paymentMethodsResponse","translate","isPaymentStored","paymentDetails","selectedInstallment","comboCardOptions","genericPayment","isDone","isValid","presentToShopper","orderPayload","enabled","deliveryDate","shopperStatement","localPaymentMethods","createSpinner","indicatorOptions","parent","posTop","posLeft","loadingText","$","removeClass","show","spinner","create","destroySpinner","hide","destroy","isPreview","path","cb","method","url","headers","channel","success","customPaymentProperties","checkoutCard","store","get","constants","isAuthRedirect","redirect","action","selector","checkoutComponent","instance","storageApi","getInstance","setItem","JSON","stringify","createFromAction","getOrderPayload","shippingAddressFn","shippingAddress","billingAddressFn","billingAddress","payments","orderProfileId","shippingMethod","shoppingCart","combineLineItems","op","profileId","Emitter","emit","key","value","Topic","publish","listen","subscribe","suffix","event","args","on","_ev","creditCards","name","code","isAllowedCreditCard","creditCard","creditCardSum","parseInt","checkSum","checkAmount","amount","amountRange","validate","hasValidSum","isValidAmount","getInstallmentOptions","brand","find","createInstallmentsObj","item","numberOfInstallments","map","filter","valid","getDefaultConfig","showPayButton","toLowerCase","mount","Checkout","type","configuration","options","defaultConfiguration","AdyenCheckout","loader","document","querySelector","classList","toggle","eventEmitter","payment","ccConstants","ORDER_OP_INITIATE","handlePlaceOrder","state","component","data","payload","createPresentToShopperModal","node","createElement","setAttribute","wrapper","modal","clickEvent","removeEventListener","remove","addEventListener","innerHTML","appendChild","body","createError","preserveUrl","errorMessage","navigation","goTo","redirectLink","notifier","sendError","addDays","days","Date","setDate","getDate","Component","getComboCardOptions","brands","visa","mastercard","isDebitCard","getBrand","additionalData","overwriteBrand","originKeysRes","origin","window","location","originKeys","getPaymentMethods","getOriginKeysSuccessResponse","getScript","createCardCheckout","createLocalPaymentCheckout","createBoletoCheckout","startEventListeners","Order","getUrlParametersAndCreateOrder","orderEvent","resultCode","parse","redirectAuth","createOrder","result","getItem","customProperties","recreateOrder","orderFail","message","pubsub","topicNames","ORDER_SUBMISSION_FAIL","completeOrder","uuid","publishData","ORDER_COMPLETED","ORDER_SUBMISSION_SUCCESS","submitOrder","orderIsCompleted","completedPayload","orderSuccess","paymentState","PAYMENT_GROUP_STATE_AUTHORIZED","PAYMENT_GROUP_STATE_INITIAL","validPaymentGroups","includes","ccRestClient","request","ENDPOINT_ORDERS_CREATE_ORDER","storedOrder","urlParameters","params","split","formatResult","acc","param","decodeURIComponent","reduce","pageData","parameters","parametersObj","getResult","cleanPaymentGatewayType","setAction","paymentGateway","is3DS","checkIf3ds","isLocal","checkIfLocal","hasDetails","isAction","hasParameters","getAndCreatOrder","Payment","updatedGenericPayment","updatePayments","updatePayment","createPayment","pPayment","checkId","curId","setPayments","index","curPayment","isSameId","newPayments","hasInstallments","checkSelectedInstallment","isCreditCard","validateInstallment","storedPayment","getStoredPayment","getInstallments","Store","ko","observable","undefined","observableArray","has","viewModel","length","cardIsCredit","installmentsAllowedCountries","setDeliveryDate","boletoDeliveryDate","setShopperStatement","boletoShopperStatement","setBoletoConfig","hasBoleto","checkoutBoleto","onChange","onSubmit","address","shopperName","firstName","lastName","city","country","selectedCountry","postalCode","stateOrProvince","selectedState","street","address1","checkoutOptions","createCheckout","onBrand","onConfigSuccess","hasHolderName","enableStoreDetails","hasType","paymentMethod","isNotScheme","hasOneItem","details","getDetail","isLocalPaymentMethod","isIssuer","isSelect","createLocalCheckout","localPaymentMethod","paymentMethods","localPaymentMethodsCheckout","ViewModel","installmentsOptionsId","setInstallments","Number","setSiteCountryAndCurrency","AdyenGenericGateway","site","extensionSiteSettings","setGatewaySettings","e","errMsg","siteLocale","currencyCode","localeIsBr","curIsBr","isCheckout","pageId","reset","widget","init","Object","assign","setSiteSettings","subscribeToTopics","isPresentToShopper","ORDER_CREATED_INITIAL","ORDER_CREATE","ORDER_CREATED","PAGE_CHANGED","NOTIFICATION_ADD","emitInitialOrder","ev","checkoutLink","errorCallback","handlePageChanged","orderSubmitted","hideLoaders","toggleElementAttribute","el","querySelectorAll","forEach","vm"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,IAAMA,UAAU,GAAG,2BAAnB;AACP,EAAO,IAAMC,QAAQ,GAAG;EAAEC,EAAAA,OAAO,EAAE,SAAX;EAAsBC,EAAAA,UAAU,EAAE;EAAlC,CAAjB;AACP,EAAO,IAAMC,aAAa,GAAG;EACzBC,EAAAA,cAAc,EAAE,gBADS;EAEzBC,EAAAA,yBAAyB,EAAE,2BAFF;EAGzBC,EAAAA,mBAAmB,EAAE;EAHI,CAAtB;AAKP,EAAO,IAAMC,kBAAkB,GAAG;EAC9BC,EAAAA,OAAO,EAAE,SADqB;EAE9BC,EAAAA,OAAO,EAAE,SAFqB;EAG9BC,EAAAA,KAAK,EAAE;EAHuB,CAA3B;AAKP,EAAO,IAAMC,yBAAyB,GAAG,2EAAlC;AACP,EAAO,IAAMC,MAAM,GAAG,QAAf;AACP,EAAO,IAAMC,SAAS,GAAG;EACrBC,EAAAA,MAAM,EAAE;EAAEF,IAAAA,MAAM,EAAE,OAAV;EAAmBG,IAAAA,QAAQ,EAAE;EAA7B,GADa;EAErBC,EAAAA,MAAM,EAAE;EAAEJ,IAAAA,MAAM,EAAE,OAAV;EAAmBG,IAAAA,QAAQ,EAAE;EAA7B;EAFa,CAAlB;AAIP,EAAO,IAAME,aAAa,GAAG,eAAtB;AACP,EAAO,IAAMC,UAAU,GAAG;EAAEC,EAAAA,KAAK,EAAE,WAAT;EAAsBC,EAAAA,MAAM,EAAE;EAA9B,CAAnB;AACP,EAAO,IAAMC,IAAI,GAAG;EAAEC,EAAAA,QAAQ,EAAE,UAAZ;EAAwBC,EAAAA,OAAO,EAAE;EAAjC,CAAb;AACP,EAAO,IAAMC,OAAO,GAAG;EAAEC,EAAAA,WAAW,EAAE,kBAAf;EAAmCC,EAAAA,KAAK,EAAE;EAA1C,CAAhB;AACP,EAAO,IAAMC,iBAAiB,GAAG,mBAA1B;AAEP,EAAO,IAAMC,MAAM,GAAG,QAAf;AACP,EAAO,IAAMC,EAAE,GAAG,IAAX;AACP,EAAO,IAAMH,KAAK,GAAG,OAAd;AACP,EAAO,IAAMI,QAAQ,GAAG;EACpBC,EAAAA,IAAI,EAAE,cADc;EAEpBC,EAAAA,MAAM,EAAE,gBAFY;EAGpBtB,EAAAA,KAAK,EAAE;EAHa,CAAjB;AAKP,EAAO,IAAMuB,QAAQ,GAAG,UAAjB;AACP,EAAO,IAAMC,IAAI,GAAG,MAAb;AACP,EAAO,IAAMC,SAAS,GAAG,WAAlB;AACP,EAAO,IAAMC,YAAY,GAAG,cAArB;AACP,EAAO,IAAMC,IAAI,GAAG,MAAb;AACP,EAAO,IAAMC,UAAU,GAAG,YAAnB;AACP,EACO,IAAMC,mBAAmB,GAAG,qBAA5B;AACP,EAAO,IAAMC,WAAW,GAAG,aAApB;AACP,EACO,IAAMC,+BAA+B,GAAG,iCAAxC;AACP,EAAO,IAAMC,WAAW,GAAG,aAApB;AACP,EAAO,IAAMC,aAAa,GAAG,eAAtB;AACP,EAAO,IAAMC,iBAAiB,GAAG,mBAA1B;AACP,EAAO,IAAMC,mBAAmB,GAAG,oBAA5B;AACP,EAAO,IAAMC,iBAAiB,GAAG,mBAA1B;AACP,EAAO,IAAMC,sBAAsB,GAAG,wBAA/B;AACP,EAAO,IAAMC,SAAS,GAAG,WAAlB;AACP,EAAO,IAAMC,eAAe,GAAG,iBAAxB;AACP,EAAO,IAAMC,cAAc,GAAG,gBAAvB;AACP,EAAO,IAAMC,mBAAmB,GAAG,qBAA5B;AACP,EAAO,IAAMC,gBAAgB,GAAG,kBAAzB;AACP,EAAO,IAAMC,cAAc,GAAG,gBAAvB;AACP,EAAO,IAAMC,MAAM,GAAG,QAAf;AACP,EAAO,IAAMC,OAAO,GAAG,SAAhB;AACP,EACO,IAAMC,gBAAgB,GAAG,kBAAzB;AACP,EAAO,IAAMC,YAAY,GAAG,cAArB;AACP,EAAO,IAAMzB,MAAM,GAAG;EAClB0B,EAAAA,OAAO,EAAE,eADS;EAElBC,EAAAA,YAAY,EAAE,oBAFI;EAGlBC,EAAAA,gBAAgB,EAAE;EAHA,CAAf;AAKP,EAAO,IAAMC,mBAAmB,GAAG,qBAA5B;;EC9DA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;EAC/B,MAAMC,gBAAgB,GAAG;EACrBC,IAAAA,MAAM,EAAE,eADa;EAErBC,IAAAA,MAAM,EAAE,KAFa;EAGrBC,IAAAA,OAAO,EAAE,KAHY;EAIrBC,IAAAA,WAAW,EAAE;EAJQ,GAAzB;EAMAC,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBC,WAAnB,CAA+B,MAA/B;EACAD,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,IAAnB;EACAC,EAAAA,OAAO,CAACC,MAAR,CAAeT,gBAAf;EACH,CAVM;AAYP,EAAO,IAAMU,cAAc,GAAG,SAAjBA,cAAiB,GAAM;EAChCL,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBM,IAAnB;EACAH,EAAAA,OAAO,CAACI,OAAR;EACH,CAHM;;ACZP,gBAAe,UAAAC,SAAS,EAAI;EACxB,SAAO,UAACC,IAAD,EAAOC,EAAP,EAA8B;EAAA,QAAnBC,MAAmB,uEAAV,KAAU;EACjCX,IAAAA,CAAC,CAAClC,IAAF,CAAO;EACH8C,MAAAA,GAAG,YAAKjF,UAAL,cAAmB8E,IAAnB,CADA;EAEHE,MAAAA,MAAM,EAANA,MAFG;EAGHE,MAAAA,OAAO,EAAE;EACL,yCAAiC,QAD5B;EAELC,QAAAA,OAAO,EAAEN,SAAS,GAAG5E,QAAQ,CAACC,OAAZ,GAAsBD,QAAQ,CAACE;EAF5C,OAHN;EAOHiF,MAAAA,OAAO,EAAEL;EAPN,KAAP;EASH,GAVD;EAWH,CAZD;;ACEA,sBAAe,gBAAqCA,EAArC,EAA4C;EAAA,MAAzCpD,KAAyC,QAAzCA,KAAyC;EAAA,MAAlC0D,uBAAkC,QAAlCA,uBAAkC;EACvD,MAAMC,YAAY,GAAGC,KAAK,CAACC,GAAN,CAAUC,QAAA,CAAmBzD,IAA7B,CAArB;EACA,MAAM0D,cAAc,GAAG,iBAAiBL,uBAAxC;EACA,MAAMM,QAAQ,GAAG,SAAXA,QAAW,GAAM;EACnB,QAAMC,MAAM,GAAG;EACXA,MAAAA,MAAM,EAAEP,uBADG;EAEXQ,MAAAA,QAAQ,EAAE,qBAFC;EAGXC,MAAAA,iBAAiB,EAAER;EAHR,KAAf;EAMA,QAAMS,QAAQ,GAAGC,UAAU,CAACC,WAAX,EAAjB;EACAF,IAAAA,QAAQ,CAACG,OAAT,CAAiBT,OAAA,CAAkB/D,WAAnC,EAAgD2D,uBAAuB,CAAC3D,WAAxE;EACAqE,IAAAA,QAAQ,CAACG,OAAT,CAAiBT,OAAA,CAAkB9D,KAAnC,EAA0CwE,IAAI,CAACC,SAAL,CAAezE,KAAf,CAA1C;EAEA0E,IAAAA,gBAAgB,CAACT,MAAD,CAAhB;EACH,GAZD;EAcAF,EAAAA,cAAc,GAAGC,QAAQ,EAAX,GAAgBZ,EAAE,CAACpD,KAAD,CAAhC;EACH,CAlBD;;ECLe,SAAS2E,eAAT,CAAyB3E,KAAzB,EAAgC;EAAA,eACsDA,KAAK,EAD3D;EAAA,MAClB4E,iBADkB,UACnCC,eADmC;EAAA,MACiBC,gBADjB,UACCC,cADD;EAAA,MACmCpE,IADnC,UACmCA,IADnC;EAAA,MACyCqE,QADzC,UACyCA,QADzC;EAAA,qBAGmDhF,KAAK,GAAGA,KAAR,EAHnD;EAAA,MAGnC+E,cAHmC,gBAGnCA,cAHmC;EAAA,MAGnBF,eAHmB,gBAGnBA,eAHmB;EAAA,MAGF1E,EAHE,gBAGFA,EAHE;EAAA,MAGE8E,cAHF,gBAGEA,cAHF;EAAA,MAGkBC,cAHlB,gBAGkBA,cAHlB;EAAA,MAGkCC,YAHlC,gBAGkCA,YAHlC;EAK3C,SAAO;EACHJ,IAAAA,cAAc,qBACPD,gBAAgB,EADT,MAEPC,cAFO,CADX;EAKHK,IAAAA,gBAAgB,EAAEzE,IAAI,GAAGyE,gBALtB;EAMHC,IAAAA,EAAE,EAAE,UAND;EAOHlF,IAAAA,EAAE,EAAFA,EAPG;EAQH6E,IAAAA,QAAQ,EAAEA,QAAQ,EARf;EASHM,IAAAA,SAAS,EAAEL,cATR;EAUHJ,IAAAA,eAAe,qBACRD,iBAAiB,EADT,MAERC,eAFQ,CAVZ;EAcHK,IAAAA,cAAc,EAAdA,cAdG;EAeHC,IAAAA,YAAY,EAAZA;EAfG,GAAP;EAiBH;;MCpBKI;;mCACM;EACJC,IAAAA,IAAI,EAAE,cAACC,GAAD,EAAMC,KAAN;EAAA,aAAgBhD,CAAC,CAACiD,KAAF,CAAQ,OAAR,EAAiBC,OAAjB,CAAyBH,GAAzB,EAA8BC,KAA9B,CAAhB;EAAA,KADF;EAEJG,IAAAA,MAAM,EAAE,gBAAAzC,EAAE;EAAA,aAAIV,CAAC,CAACiD,KAAF,CAAQ,OAAR,EAAiBG,SAAjB,CAA2B1C,EAA3B,CAAJ;EAAA;EAFN;iCAKF,UAAA2C,MAAM;EAAA,WAAK;EACbP,MAAAA,IAAI,EAAE,cAACQ,KAAD;EAAA;EAAA,0CAAWC,IAAX;EAAWA,UAAAA,IAAX;EAAA;EAAA,eAAoB,YAAAvD,CAAC,CAACiD,KAAF,WAAWI,MAAX,cAAqBC,KAArB,IAA8BJ,OAA9B,iBAAyCK,IAAzC,CAApB;EAAA,OADO;EAEbC,MAAAA,EAAE,EAAE,YAACF,KAAD,EAAQ5C,EAAR;EAAA,eAAeV,CAAC,CAACiD,KAAF,WAAWI,MAAX,cAAqBC,KAArB,GAA8BF,SAA9B,CAAwC1C,EAAxC,CAAf;EAAA;EAFS,KAAL;EAAA;kCAKL,UAACqC,GAAD;EAAA;EAAA,uCAASQ,IAAT;EAASA,MAAAA,IAAT;EAAA;EAAA,WAAkB,aAAAvD,CAAC,CAACiD,KAAF,CAAQF,GAAR,GAAaG,OAAb,kBAAwBK,IAAxB,CAAlB;EAAA;qCAEG,KAAKE,GAAL,CAAS,SAAT;mCACF,KAAKA,GAAL,CAAS,OAAT;uCACI,KAAKA,GAAL,CAAS,WAAT;gCAEP,UAACH,KAAD,EAAQ5C,EAAR;EAAA,WAAeV,CAAC,CAACiD,KAAF,CAAQK,KAAR,EAAeF,SAAf,CAAyB1C,EAAzB,CAAf;EAAA;;AAGT,qBAAe,IAAImC,OAAJ,EAAf;;ECtBA,IAAMa,WAAW,GAAG,CAChB;EAAEjG,EAAAA,EAAE,EAAE,CAAN;EAASkG,EAAAA,IAAI,EAAE,MAAf;EAAuBC,EAAAA,IAAI,EAAE;EAA7B,CADgB;EAYhB;EAAEnG,EAAAA,EAAE,EAAE,CAAN;EAASkG,EAAAA,IAAI,EAAE,KAAf;EAAsBC,EAAAA,IAAI,EAAE;EAA5B,CAZgB;EAchB;EAAEnG,EAAAA,EAAE,EAAE,CAAN;EAASkG,EAAAA,IAAI,EAAE,WAAf;EAA4BC,EAAAA,IAAI,EAAE;EAAlC,CAdgB,EAehB;EAAEnG,EAAAA,EAAE,EAAE,CAAN;EAASkG,EAAAA,IAAI,EAAE,WAAf;EAA4BC,EAAAA,IAAI,EAAE;EAAlC,CAfgB;EAqBhB;EAAEnG,EAAAA,EAAE,EAAE,CAAN;EAASkG,EAAAA,IAAI,EAAE,YAAf;EAA6BC,EAAAA,IAAI,EAAE;EAAnC,CArBgB;EA8BhB;EAAEnG,EAAAA,EAAE,EAAE,EAAN;EAAUkG,EAAAA,IAAI,EAAE,MAAhB;EAAwBC,EAAAA,IAAI,EAAE;EAA9B,CA9BgB;EAAA,CAApB;EAoCA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,UAAD,EAAaC,aAAb;EAAA,SAA+B,CAACC,QAAQ,CAACD,aAAD,CAAR,GAA0BD,UAAU,CAACrG,EAAtC,MAA8C,CAA7E;EAAA,CAA5B;EACA,IAAMwG,QAAQ,GAAG,SAAXA,QAAW,CAACH,UAAD,EAAaC,aAAb;EAAA,SAA+BD,UAAU,IAAID,mBAAmB,CAACC,UAAD,EAAaC,aAAb,CAAhE;EAAA,CAAjB;EACA,IAAMG,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,WAAT;EAAA,SAAyBD,MAAM,IAAIC,WAAnC;EAAA,CAApB;EACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,WAAD,EAAcC,aAAd;EAAA,SAAgCD,WAAW,IAAIC,aAA/C;EAAA,CAAjB;EAEA,SAASC,qBAAT,CAA+B/F,mBAA/B,EAAoD0F,MAApD,EAA4DM,KAA5D,EAAmE;EAC/D,MAAMX,UAAU,GAAGJ,WAAW,CAACgB,IAAZ,CAAiB;EAAA,QAAGd,IAAH,QAAGA,IAAH;EAAA,WAAca,KAAK,KAAKb,IAAxB;EAAA,GAAjB,CAAnB;EACA,MAAMe,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAC,IAAI,EAAI;EAAA,+BACyBA,IADzB;EAAA,QAC3BR,WAD2B;EAAA,QACdS,oBADc;EAAA,QACQd,aADR;EAElC,QAAMO,WAAW,GAAGL,QAAQ,CAACH,UAAD,EAAaC,aAAb,CAA5B;EACA,QAAMQ,aAAa,GAAGL,WAAW,CAACC,MAAD,EAASC,WAAT,CAAjC;EACA,QAAMjF,OAAO,GAAGkF,QAAQ,CAACC,WAAD,EAAcC,aAAd,CAAxB;EAEA,WAAOpF,OAAO,IAAI;EAAE0F,MAAAA,oBAAoB,EAApBA;EAAF,KAAlB;EACH,GAPD;EASA,SAAOpG,mBAAmB,CAACqG,GAApB,CAAwBH,qBAAxB,EAA+C,EAA/C,EAAmDI,MAAnD,CAA0D,UAAAC,KAAK;EAAA,WAAIA,KAAJ;EAAA,GAA/D,CAAP;EACH;;EChDM,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;EAClC,MAAM3G,aAAW,GAAG4C,KAAK,CAACC,GAAN,CAAUC,WAAV,CAApB;EACA,MAAM5E,QAAM,GAAG0E,KAAK,CAACC,GAAN,CAAUC,MAAV,CAAf;EACA,MAAMrD,WAAS,GAAGmD,KAAK,CAACC,GAAN,CAAUC,SAAV,CAAlB;EACA,MAAMzC,wBAAsB,GAAGuC,KAAK,CAACC,GAAN,CAAUC,sBAAV,CAA/B;EAEA,SAAO;EACH8D,IAAAA,aAAa,EAAE,IADZ;EAEH1I,IAAAA,MAAM,EAANA,QAFG;EAGH8B,IAAAA,WAAW,EAAEA,aAAW,CAAC6G,WAAZ,EAHV;EAIHpH,IAAAA,SAAS,EAATA,WAJG;EAKHY,IAAAA,sBAAsB,EAAtBA;EALG,GAAP;EAOH,CAbM;AAeP,EAAO,IAAMqD,gBAAgB,GAAG,SAAnBA,gBAAmB,OAA6C;EAAA,MAA1CT,MAA0C,QAA1CA,MAA0C;EAAA,MAAlCC,QAAkC,QAAlCA,QAAkC;EAAA,MAAxBC,iBAAwB,QAAxBA,iBAAwB;EACzEA,EAAAA,iBAAiB,CAACO,gBAAlB,CAAmCT,MAAnC,EAA2C6D,KAA3C,CAAiD5D,QAAjD;EACH,CAFM;MAID6D,WACF,kBAAYC,KAAZ,EAAkB;EAAA;EAAA;EAAA,0CAID,iBAAkD5E,EAAlD,EAAyD;EAAA,QAAtD6E,aAAsD,SAAtDA,aAAsD;EAAA,QAAvC/D,QAAuC,SAAvCA,QAAuC;EAAA,QAA7B8D,IAA6B,SAA7BA,IAA6B;EAAA,8BAAvBE,OAAuB;EAAA,QAAvBA,OAAuB,8BAAb,EAAa;EACtE,QAAMC,oBAAoB,GAAGR,gBAAgB,EAA7C,CADsE;EAGtE,QAAMvH,QAAQ,GAAG,IAAIgI,aAAJ,oBAAuBD,oBAAvB,MAAgDF,aAAhD,EAAjB;EACA7H,IAAAA,QAAQ,CAAC0C,MAAT,CAAgBkF,IAAhB,EAAsBE,OAAtB,EAA+BJ,KAA/B,CAAqC5D,QAArC;EAEAd,IAAAA,EAAE,CAAChD,QAAD,CAAF;EACH,GAXiB;EAAA,oCAaP;EAAA,WAAM,YAAM;EACnB,UAAMiI,MAAM,GAAGC,QAAQ,CAACC,aAAT,kBAAiC,KAAI,CAACP,IAAtC,8BAAf;EACAK,MAAAA,MAAM,IAAIA,MAAM,CAACG,SAAP,CAAiBC,MAAjB,CAAwB,MAAxB,EAAgC,KAAhC,CAAV;EAEA,UAAMzI,OAAK,GAAG4D,KAAK,CAACC,GAAN,CAAUC,KAAV,CAAd;EACA4E,MAAAA,YAAY,CAACC,OAAb,CAAqBnD,IAArB,CAA0B1B,UAA1B,EAAgD,KAAI,CAACkE,IAArD;EAEAhI,MAAAA,OAAK,GAAGG,EAAR,CAAW,IAAX;EACAH,MAAAA,OAAK,GAAGqF,EAAR,CAAWuD,WAAW,CAACC,iBAAvB;EACA7I,MAAAA,OAAK,GAAG8I,gBAAR;EACH,KAVU;EAAA,GAbO;EAAA,oCAyBP,UAAAZ,OAAO;EAAA,WAAI,UAACa,KAAD,EAAQC,SAAR,EAAsB;EACxC,UAAMxH,gBAAc,GAAGoC,KAAK,CAACC,GAAN,CAAUC,cAAV,CAAvB;EACA,UAAMjC,SAAO,GAAGmH,SAAS,CAACnH,OAAV,IAAqB,QAAOkH,KAAK,CAACE,IAAb,MAAsB,QAA3D;EACAP,MAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,OAAxB,EAA2CjC,SAA3C;EAEA,UAAMqH,OAAO,sBAAQ1H,gBAAR,sBAAyB,KAAI,CAACwG,IAA9B,qBAA0Ce,KAAK,CAACE,IAAhD,MAAyDf,OAAzD,GAAb;EAEAQ,MAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,cAAxB,EAAkDoF,OAAlD;EACH,KARiB;EAAA,GAzBA;EACd,OAAKlB,IAAL,GAAYA,KAAZ;EACH;;EC3BE,IAAMmB,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAA/F,EAAE,EAAI;EAC7C,MAAMgG,IAAI,GAAGd,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAb;EACAD,EAAAA,IAAI,CAACE,YAAL,CACI,OADJ,EAEI,qGACI,sBAHR;EAMA,MAAMC,OAAO,GAAGjB,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAhB;EACAE,EAAAA,OAAO,CAACD,YAAR,CAAqB,OAArB,EAA8B,yEAA9B;EACAC,EAAAA,OAAO,CAACD,YAAR,CAAqB,IAArB,EAA2B,yBAA3B;EAEA,MAAME,KAAK,GAAGlB,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAd;EACAG,EAAAA,KAAK,CAACF,YAAN,CAAmB,IAAnB,EAAyB,iBAAzB;EACAE,EAAAA,KAAK,CAACF,YAAN,CAAmB,OAAnB,EAA4B,mCAA5B;EAEA,MAAMG,UAAU,GAAG,SAAbA,UAAa,GAAM;EACrBF,IAAAA,OAAO,CAACG,mBAAR,CAA4B,OAA5B,EAAqCD,UAArC;EACAL,IAAAA,IAAI,CAACO,MAAL;EACH,GAHD;EAKAJ,EAAAA,OAAO,CAACK,gBAAR,CAAyB,OAAzB,EAAkCH,UAAlC;EAEAL,EAAAA,IAAI,CAACS,SAAL,GACI,6GADJ;EAEAT,EAAAA,IAAI,CAACU,WAAL,CAAiBN,KAAjB;EACAJ,EAAAA,IAAI,CAACU,WAAL,CAAiBP,OAAjB;EAEAjB,EAAAA,QAAQ,CAACyB,IAAT,CAAcD,WAAd,CAA0BV,IAA1B;EACAhG,EAAAA,EAAE,CAACgG,IAAD,CAAF;EACH,CA9BM;;ECIP,IAAMY,WAAW,GAAG,SAAdA,WAAc,CAAC9B,OAAD;EAAA,MAAU+B,WAAV,uEAAwB,KAAxB;EAAA,SAAkC,YAAuD;EAAA,mFAAP,EAAO;EAAA,iCAApDC,YAAoD;EAAA,QAApDA,YAAoD,kCAArC,yBAAqC;EACzG,sBAAkBhC,OAAlB,IAA6BiC,UAAU,CAACC,IAAX,CAAgBlC,OAAO,CAACmC,YAAxB,EAAsCJ,WAAtC,CAA7B;EACAlH,IAAAA,cAAc;EACduH,IAAAA,QAAQ,CAACC,SAAT,CAAmB,OAAnB,EAA4BL,YAA5B,EAA0C,IAA1C;EACH,GAJmB;EAAA,CAApB;;ECJO,IAAMM,OAAO,GAAG,SAAVA,OAAU,CAAAC,IAAI;EAAA,SAAI,IAAIC,IAAJ,GAAWC,OAAX,CAAmB,IAAID,IAAJ,GAAWE,OAAX,KAAuBH,IAA1C,CAAJ;EAAA,CAApB;;MCKDI,YACF,qBAAc;EAAA;EAAA;EAAA,+CAIQ,YAAM;EACxBnC,IAAAA,YAAY,CAACM,SAAb,CAAuB9C,EAAvB,CAA0BpC,MAA1B,EAA4C,KAAI,CAAC5D,MAAjD;EACAwI,IAAAA,YAAY,CAACM,SAAb,CAAuB9C,EAAvB,CAA0BpC,gBAA1B,EAAsD,KAAI,CAACgH,mBAA3D;EACH,GAPa;EAAA,oCASH,UAACC,MAAD,EAAS5D,KAAT;EAAA,WACPA,KAAK,IAAI4D,MAAT,GAAkBA,MAAM,CAACnH,KAAK,CAACC,GAAN,CAAUC,aAAV,CAAD,CAAxB,GAA+DF,KAAK,CAACC,GAAN,CAAUC,aAAV,CADxD;EAAA,GATG;EAAA,+CAWQ,YAAM;EACxB,QAAMiH,MAAM,GAAG;EAAEC,MAAAA,IAAI,EAAElH,IAAA,CAAelE,QAAvB;EAAiCqL,MAAAA,UAAU,EAAEnH,IAAA,CAAejE;EAA5D,KAAf;EACA,QAAMqB,mBAAiB,GAAG0C,KAAK,CAACC,GAAN,CAAUC,iBAAV,GAA1B;EACA,QAAMoH,WAAW,GAAGhK,mBAAiB,KAAK4C,UAAA,CAAqBrE,KAA/D;EACA,QAAM0H,KAAK,GAAGvD,KAAK,CAACC,GAAN,CAAUC,aAAV,CAAd;EACA,QAAM7C,eAAa,GAAG,KAAI,CAACkK,QAAL,CAAcJ,MAAd,EAAsB5D,KAAtB,CAAtB;EAEA,QAAMe,OAAO,GAAG;EAAEjH,MAAAA,aAAa,EAAbA,eAAF;EAAiBmK,MAAAA,cAAc,EAAE;EAAEC,QAAAA,cAAc,EAAE;EAAlB;EAAjC,KAAhB;EAEA3C,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,gBAAxB,EAAoDoH,WAAW,GAAGhD,OAAH,GAAa,EAA5E;EACH,GArBa;EAAA,wDAuBiB,UAAAoD,aAAa,EAAI;EAAA,QACpCC,MADoC,GACzBC,MAAM,CAACC,QADkB,CACpCF,MADoC;EAE5C7C,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,SAAxB,EAA6CwH,aAAa,CAACI,UAAd,CAAyBH,MAAzB,CAA7C;EACA3H,IAAAA,KAAK,CAACC,GAAN,CAAUC,IAAV,EAA0B,gBAA1B,EAA4C,KAAI,CAAC6H,iBAAjD;EACH,GA3Ba;EAAA,kCA6BL,YAAM;EACX/H,IAAAA,KAAK,CAACC,GAAN,CAAUC,IAAV,EAA0B,YAA1B,EAAwC,KAAI,CAAC8H,4BAA7C;EACH,GA/Ba;EAAA,6CAiCM,UAAAvK,wBAAsB,EAAI;EAC1CqH,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,sBAAxB,EAA0DzC,wBAA1D;EAEAqB,IAAAA,CAAC,CAACmJ,SAAF,CAAY/H,yBAAZ,EAAiD,YAAM;EACnDgI,MAAAA,kBAAkB;EAClBC,MAAAA,0BAA0B,CAAC1K,wBAAD,CAA1B;EACAuC,MAAAA,KAAK,CAACC,GAAN,CAAUC,aAAV,KAAsCkI,oBAAoB,EAA1D;EACH,KAJD;EAKH,GAzCa;EACV,OAAKC,mBAAL;EACH;;MCCCC;;EACF,mBAAc;EAAA;EAAA;EAAA,iDAMQ,YAAM;EACxBxD,MAAAA,YAAY,CAAC1I,KAAb,CAAmBkG,EAAnB,CAAsBpC,WAAtB,EAA6C,KAAI,CAACqI,8BAAlD;EACAzD,MAAAA,YAAY,CAAC1I,KAAb,CAAmBkG,EAAnB,CAAsBpC,mBAAtB,EAAqD,KAAI,CAACjD,mBAA1D;EACH,KATa;EAAA,iDAWQ,UAAAuL,UAAU,EAAI;EAChC,UAAMpM,OAAK,GAAG4D,KAAK,CAACC,GAAN,CAAUC,KAAV,CAAd;EADgC,UAExBJ,uBAFwB,GAEI0I,UAAU,CAACpM,KAAX,CAAiBgF,QAAjB,CAA0B,CAA1B,CAFJ,CAExBtB,uBAFwB;EAAA,UAGxBuF,IAHwB,GAGHvF,uBAHG,CAGxBuF,IAHwB;EAAA,UAGlBoD,UAHkB,GAGH3I,uBAHG,CAGlB2I,UAHkB;EAKhC,UAAMnD,OAAO,GAAG;EAAElJ,QAAAA,KAAK,EAAE2E,eAAe,CAAC3E,OAAD,CAAxB;EAAiC0D,QAAAA,uBAAuB,EAAEc,IAAI,CAAC8H,KAAL,CAAWrD,IAAX,CAA1D;EAA4EoD,QAAAA,UAAU,EAAVA;EAA5E,OAAhB;EAEA3D,MAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,YAAxB,EAAgDoF,OAAhD;EACA,UAAMtH,QAAM,GAAGgC,KAAK,CAACC,GAAN,CAAUC,MAAV,CAAf;EACA,OAAClC,QAAM,EAAP,IAAa2K,YAAY,CAACrD,OAAD,EAAU,KAAI,CAACsD,WAAf,CAAzB;EACH,KArBa;EAAA,8CAuBK,UAAAC,MAAM,EAAI;EACzBA,MAAAA,MAAM,CAAC1M,WAAP,GAAqB,KAAI,CAACqE,QAAL,CAAcsI,OAAd,CAAsB5I,OAAA,CAAkB/D,WAAxC,CAArB;EAEA,UAAM4I,OAAO,GAAG;EAAEX,QAAAA,IAAI,EAAE,SAAR;EAAmB2E,QAAAA,gBAAgB,EAAEF;EAArC,OAAhB;EAEA,MAAA,KAAI,CAACG,aAAL,CAAmBjE,OAAnB;EACH,KA7Ba;EAAA,yCA+BA,UAAA5G,YAAY,EAAI;EAC1B,UAAM8K,SAAS,GAAG,SAAZA,SAAY,GAAiD;EAAA,uFAAP,EAAO;EAAA,gCAA9CC,OAA8C;EAAA,YAA9CA,OAA8C,6BAApC,wBAAoC;EAC/DpK,QAAAA,CAAC,CAACiD,KAAF,CAAQoH,MAAM,CAACC,UAAP,CAAkBC,qBAA1B,EAAiDrH,OAAjD,CAAyD;EAAEkH,UAAAA,OAAO,EAAE,MAAX;EAAmB5C,UAAAA,YAAY,EAAE4C;EAAjC,SAAzD;EACH,OAFD;EAIA,UAAMI,aAAa,GAAG,SAAhBA,aAAgB,QAAkB;EAAA,YAAf/M,EAAe,SAAfA,EAAe;EAAA,YAAXgN,IAAW,SAAXA,IAAW;EACpCzE,QAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,MAAxB,EAA0C,IAA1C;EACA,YAAMsJ,WAAW,GAAG;EAAEN,UAAAA,OAAO,EAAE,SAAX;EAAsB3M,UAAAA,EAAE,EAAFA,EAAtB;EAA0BgN,UAAAA,IAAI,EAAJA;EAA1B,SAApB;EACAzK,QAAAA,CAAC,CAACiD,KAAF,CAAQoH,MAAM,CAACC,UAAP,CAAkBK,eAA1B,EAA2CzH,OAA3C,CAAmDwH,WAAnD;EACA1K,QAAAA,CAAC,CAACiD,KAAF,CAAQoH,MAAM,CAACC,UAAP,CAAkBM,wBAA1B,EAAoD1H,OAApD,CAA4D,CAACwH,WAAD,CAA5D;EACH,OALD;EAOA,UAAMG,WAAW,GAAG,SAAdA,WAAc,CAAAtE,IAAI,EAAI;EACxB,YAAMuE,gBAAgB,GAAGzL,YAAY,CAACsD,EAAb,KAAoB,UAA7C;EACA,YAAMoI,gBAAgB,sBAAQ1L,YAAR;EAAsBsD,UAAAA,EAAE,EAAE;EAA1B,UAAtB;EACA,eAAOmI,gBAAgB,GAAGN,aAAa,CAACjE,IAAD,CAAhB,GAAyB,KAAI,CAACuD,WAAL,CAAiBiB,gBAAjB,CAAhD;EACH,OAJD;EAMA,UAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAzE,IAAI,EAAI;EAAA,8BACSA,IAAI,CAACjE,QAAL,CAAc,CAAd,CADT;EAAA,YACjB2I,YADiB,mBACjBA,YADiB;EAAA,YACHb,OADG,mBACHA,OADG;EAAA,YAEjBc,8BAFiB,GAE+ChF,WAF/C,CAEjBgF,8BAFiB;EAAA,YAEeC,2BAFf,GAE+CjF,WAF/C,CAEeiF,2BAFf;EAGzB,YAAMC,kBAAkB,GAAG,CAACF,8BAAD,EAAiCC,2BAAjC,CAA3B;EACA,YAAMhM,OAAO,GAAGiM,kBAAkB,CAACC,QAAnB,CAA4BJ,YAA5B,CAAhB;EACA,eAAO9L,OAAO,GAAG0L,WAAW,CAACtE,IAAD,CAAd,GAAuB4D,SAAS,CAAC;EAAEC,UAAAA,OAAO,EAAPA,OAAF;EAAW7D,UAAAA,IAAI,EAAJA;EAAX,SAAD,CAA9C;EACH,OAND;EAQA+E,MAAAA,YAAY,CAACC,OAAb,CAAqBrF,WAAW,CAACsF,4BAAjC,EAA+DnM,YAA/D,EAA6E2L,YAA7E,EAA2Fb,SAA3F;EACH,KA1Da;EAAA,2CA4DE,UAAA9M,WAAW,EAAI;EAC3B,UAAMoO,WAAW,GAAG3J,IAAI,CAAC8H,KAAL,CAAW,KAAI,CAAClI,QAAL,CAAcsI,OAAd,CAAsB5I,OAAA,CAAkB9D,KAAxC,CAAX,CAApB;EACAmO,MAAAA,WAAW,CAACnJ,QAAZ,GAAuB,CAACjF,WAAD,CAAvB;EAEA,MAAA,KAAI,CAACyM,WAAL,CAAiB2B,WAAjB;EACH,KAjEa;EAAA,uCAmEF,UAAAC,aAAa,EAAI;EACzB,UAAMC,MAAM,GAAGD,aAAa,CAACE,KAAd,CAAoB,GAApB,CAAf;EACA,UAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAMC,KAAN,EAAgB;EAAA,2BACZA,KAAK,CAACH,KAAN,CAAY,GAAZ,CADY;EAAA;EAAA,YAC1B7I,GAD0B;EAAA,YACrBC,KADqB;EAEjC,kCAAY8I,GAAZ,sBAAkB/I,GAAlB,EAAwBiJ,kBAAkB,CAAChJ,KAAD,CAA1C;EACH,OAHD;EAKA,aAAO2I,MAAM,CAACM,MAAP,CAAcJ,YAAd,EAA4B,EAA5B,CAAP;EACH,KA3Ea;EAAA,4DA6EmB,UAAAK,QAAQ,EAAI;EACzC,UAAM5O,OAAK,GAAG4D,KAAK,CAACC,GAAN,CAAUC,KAAV,CAAd;EADyC,UAEjC+K,UAFiC,GAElBD,QAFkB,CAEjCC,UAFiC;EAIzC,UAAIA,UAAJ,EAAgB;EACZzM,QAAAA,aAAa;EAEb,YAAM0M,aAAa,GAAG,KAAI,CAACC,SAAL,CAAeF,UAAf,CAAtB;EAEA,QAAA,KAAI,CAACG,uBAAL,CAA6BhP,OAA7B;EACA,QAAA,KAAI,CAACiP,SAAL,CAAeH,aAAf;EACH;EACJ,KAzFa;EAAA,qDA2FY,UAAA9O,KAAK,EAAI;EAC/B,UAAIA,KAAK,GAAGkP,cAAR,EAAJ,EAA8B;EAC1BlP,QAAAA,KAAK,GAAGkP,cAAR,GAAyBlH,IAAzB,GAAgC,EAAhC;EACH;EACJ,KA/Fa;EAAA,wCAqGD,UAAA8G,aAAa;EAAA,aAAI,WAAWA,aAAX,IAA4B,QAAQA,aAAxC;EAAA,KArGZ;EAAA,0CAsGC,UAAAA,aAAa;EAAA,aAAI,aAAaA,aAAjB;EAAA,KAtGd;EAAA,2CAuGE,UAAAA,aAAa,EAAI;EAC7B,UAAMK,KAAK,GAAG,KAAI,CAACC,UAAL,CAAgBN,aAAhB,CAAd;EACA,UAAMO,OAAO,GAAG,KAAI,CAACC,YAAL,CAAkBR,aAAlB,CAAhB;EACA,UAAMS,UAAU,GAAGJ,KAAK,IAAIE,OAA5B;EACA,aAAOE,UAAP;EACH,KA5Ga;EACV,SAAKnL,QAAL,GAAgBC,UAAU,CAACC,WAAX,EAAhB;EAEA,SAAK2H,mBAAL;EACH;;;gCA6FS6C,eAAe;EACrB,WAAKU,QAAL,GAAgB,KAAKC,aAAL,CAAmBX,aAAnB,CAAhB;EACA,WAAKU,QAAL,IAAiB,KAAKE,gBAAL,CAAsBZ,aAAtB,CAAjB;EACH;;;;;MC1GCa,UACF,mBAAc;EAAA;EAAA;EAAA,+CAIQ,YAAM;EACxBjH,IAAAA,YAAY,CAACC,OAAb,CAAqBzC,EAArB,CAAwBpC,UAAxB,EAA8C,KAAI,CAAClD,UAAnD;EACH,GANa;EAAA,sCAQD,UAAAoH,IAAI,EAAI;EACjB,QAAMhI,OAAK,GAAG4D,KAAK,CAACC,GAAN,CAAUC,KAAV,CAAd;EACA,QAAM3D,IAAE,GAAGyD,KAAK,CAACC,GAAN,CAAUC,EAAV,CAAX;EAEA,QAAMnC,gBAAc,GAAGiC,KAAK,CAACC,GAAN,CAAUC,cAAV,CAAvB;EACA,QAAM8L,qBAAqB,sBAAQjO,gBAAR;EAAwBxB,MAAAA,EAAE,EAAEA,IAAE;EAA9B,MAA3B;EAEAuI,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,cAAxB,EAAkD8L,qBAAlD;EACAlH,IAAAA,YAAY,CAACM,SAAb,CAAuBxD,IAAvB,CAA4B1B,gBAA5B;EAEA,QAAMkB,QAAQ,GAAG,CAAC4K,qBAAD,CAAjB;EAEA5P,IAAAA,OAAK,GAAG6P,cAAR,CAAuB7K,QAAvB;EAEA,IAAA,KAAI,CAAC8K,aAAL,CAAmB,KAAI,CAACC,aAAL,CAAmB/H,IAAnB,CAAnB;EACH,GAvBa;EAAA,yCAyBE,UAAAgI,QAAQ,EAAI;EACxB,QAAMhQ,OAAK,GAAG4D,KAAK,CAACC,GAAN,CAAUC,KAAV,CAAd;EACA,QAAM3D,IAAE,GAAGyD,KAAK,CAACC,GAAN,CAAUC,EAAV,CAAX;EAEA,QAAMkB,QAAQ,GAAGhF,OAAK,GAAGgF,QAAR,EAAjB;EACA,QAAMiL,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQ/P,EAAR;EAAA,aAAe+P,KAAK,IAAIA,KAAK,KAAK/P,EAAE,EAApC;EAAA,KAAhB;EACA,QAAMgQ,WAAW,GAAG,SAAdA,WAAc,CAACxH,OAAD,EAAUyH,KAAV,EAAoB;EACpC,UAAMC,UAAU,GAAGrL,QAAQ,CAACoL,KAAD,CAA3B;EADoC,UAExBF,KAFwB,GAEdG,UAFc,CAE5BlQ,EAF4B;EAGpC,UAAMmQ,QAAQ,GAAGL,OAAO,CAACC,KAAD,EAAQ/P,IAAR,CAAxB;EACA,aAAOmQ,QAAQ,GAAGN,QAAH,GAAcK,UAA7B;EACH,KALD;EAOA,QAAME,WAAW,GAAGvL,QAAQ,CAACwC,GAAT,CAAa2I,WAAb,CAApB;EACAnQ,IAAAA,OAAK,GAAGgF,QAAR,CAAiBuL,WAAjB;EACH,GAxCa;EAAA,yCA0CE,UAAAvI,IAAI,EAAI;EACpB,QAAM5G,mBAAiB,GAAGwC,KAAK,CAACC,GAAN,CAAUC,iBAAV,CAA1B;EACA,QAAMvC,iBAAe,GAAGqC,KAAK,CAACC,GAAN,CAAUC,eAAV,CAAxB;EACA,QAAMtC,gBAAc,GAAGoC,KAAK,CAACC,GAAN,CAAUC,cAAV,CAAvB;EACA,QAAMrC,qBAAmB,GAAGmC,KAAK,CAACC,GAAN,CAAUC,mBAAV,CAA5B;EACA,QAAM5C,mBAAiB,GAAG0C,KAAK,CAACC,GAAN,CAAUC,iBAAV,CAA1B;EACA,QAAMpC,kBAAgB,GAAGkC,KAAK,CAACC,GAAN,CAAUC,gBAAV,CAAzB;EAEA,QAAM0M,eAAe,GAAG,KAAI,CAACC,wBAAL,CAA8BhP,qBAA9B,CAAxB;EAEA,QAAMiP,YAAY,GAAGxP,mBAAiB,OAAO4C,UAAA,CAAqBpE,MAAlE;EACA,QAAMmC,OAAO,GAAG,KAAI,CAAC8O,mBAAL,CAAyBH,eAAzB,EAA0CE,YAA1C,CAAhB;EAEA,QAAME,aAAa,GAAG,KAAI,CAACC,gBAAL,CAAsBtP,iBAAtB,EAAuCH,mBAAvC,CAAtB;EACA,QAAMmG,oBAAoB,GAAG,KAAI,CAACuJ,eAAL,CAAqBjP,OAArB,EAA8BJ,qBAA9B,CAA7B;EAEA,QAAME,gBAAc,GAAGiC,KAAK,CAACC,GAAN,CAAUC,cAAV,CAAvB;EACA,QAAM6I,gBAAgB;EAClBnL,MAAAA,cAAc,EAAEA,gBAAc,CAACwG,IAAD,CADZ;EAElB4I,MAAAA,aAAa,EAAbA;EAFkB,OAGdrJ,oBAAoB,IAAI;EAAEA,MAAAA,oBAAoB,EAApBA;EAAF,KAHV,MAIf7F,kBAJe,CAAtB;EAMA,QAAMkO,qBAAqB,sBAAQjO,gBAAR;EAAwBgL,MAAAA,gBAAgB,EAAhBA;EAAxB,MAA3B;EAEA,WAAOiD,qBAAP;EACH,GApEa;EAAA,oDAsEa,UAAAnO,mBAAmB;EAAA,WAC1CA,mBAAmB,MAAM,0BAA0BA,mBAAmB,EAD5B;EAAA,GAtEhC;EAAA,2CAwEI,UAACI,OAAD,EAAUJ,mBAAV;EAAA,WAAkCI,OAAO,IAAI6E,QAAQ,CAACjF,mBAAmB,GAAG8F,oBAAvB,CAArD;EAAA,GAxEJ;EAAA,+CAyEQ,UAACiJ,eAAD,EAAkBE,YAAlB;EAAA,WAAmCF,eAAe,IAAIE,YAAtD;EAAA,GAzER;EAAA,4CA0EK,UAACnP,eAAD,EAAkBH,iBAAlB;EAAA,WAAyCG,eAAe,GAAGH,iBAAiB,EAApB,GAAyB,EAAjF;EAAA,GA1EL;EACV,OAAK6K,mBAAL;EACH;;MCFC8E;;EACF,mBAAc;EAAA;EAAA;EAAA,2CAIE,KAJF;EAAA,+CAMMC,EAAE,CAACC,UAAH,CAAc,EAAd,CANN;EAAA,yCAOAC,SAPA;EAAA,wCAQDA,SARC;EAAA,uCAWF,IAAIrG,SAAJ,EAXE;EAAA,sCAYHqG,SAZG;EAAA,uCAaF,EAbE;EAAA,qCAcJ,KAdI;EAAA,2CAeEA,SAfF;EAAA,wCAgBD1R,UAAU,CAACE,MAhBV;EAAA,uCAiBFF,UAAU,CAACC,KAjBT;EAAA,wCAkBDuR,EAAE,CAACC,UAAH,CAAc,CAACzR,UAAU,CAACE,MAAZ,EAAoBF,UAAU,CAACC,KAA/B,CAAd,CAlBC;EAAA,8CAmBK,EAnBL;EAAA,+CAoBMuR,EAAE,CAACC,UAAH,CAAczR,UAAU,CAACE,MAAzB,CApBN;EAAA,6CAqBIsR,EAAE,CAACC,UAAH,CAAc,KAAd,CArBJ;EAAA,oDAsBWC,SAtBX;EAAA,4CAuBGA,SAvBH;EAAA,sCAwBHF,EAAE,CAACC,UAAH,CAAc,KAAd,CAxBG;EAAA,0CAyBCD,EAAE,CAACC,UAAH,CAAc,EAAd,CAzBD;EAAA,iDA0BQD,EAAE,CAACC,UAAH,CAAc,EAAd,CA1BR;EAAA,0DA2BiB,CAAC9R,SAAS,CAACG,MAAV,CAAiBJ,MAAlB,EAA0BC,SAAS,CAACC,MAAV,CAAiBF,MAA3C,CA3BjB;EAAA,iDA4BQ,EA5BR;EAAA,8CA+BK,IAAIyQ,OAAJ,EA/BL;EAAA,4CAgCG;EAAE3H,MAAAA,IAAI,EAAE;EAAR,KAhCH;EAAA,4CAmCG,IAAIkE,KAAJ,EAnCH;EAAA,oCAoCL8E,EAAE,CAACC,UAAH,CAAc,KAAd,CApCK;EAAA,2CAuCE,KAvCF;EAAA,gDAwCO,EAxCP;EAAA,oDAyCW,EAzCX;EAAA,2CA4CED,EAAE,CAACC,UAAH,CAAc,EAAd,CA5CF;EAAA,iDA6CQD,EAAE,CAACG,eAAH,EA7CR;EAAA,iDAyDQ,YAAM;EACxBzI,MAAAA,YAAY,CAAC9E,KAAb,CAAmBiC,MAAnB,CAA0B,UAACJ,GAAD,EAAMC,KAAN,EAAgB;EACtC,YAAI,OAAO,KAAI,CAACD,GAAD,CAAX,KAAqB,UAAzB,EAAqC;EACjC,UAAA,KAAI,CAACA,GAAD,CAAJ,CAAUC,KAAV;EACH,SAFD,MAEO;EACH,UAAA,KAAI,CAACD,GAAD,CAAJ,GAAYC,KAAZ;EACH;EACJ,OAND;EAOH,KAjEa;EAAA,iCAmER,UAAAD,GAAG;EAAA,aAAK,KAAI,CAAC2L,GAAL,CAAS3L,GAAT,IAAgB,KAAI,CAACA,GAAD,CAApB,GAA4ByL,SAAjC;EAAA,KAnEK;EAAA,iCAqER,UAAAzL,GAAG;EAAA,aAAIA,GAAG,IAAI,KAAX;EAAA,KArEK;EAAA,kCAuEP,UAAA4L,SAAS,EAAI;EAChB,MAAA,KAAI,CAAClR,EAAL,GAAUkR,SAAS,CAAClR,EAApB;EACA,MAAA,KAAI,CAACH,KAAL,GAAaqR,SAAS,CAACrR,KAAvB;EACA,MAAA,KAAI,CAACW,IAAL,GAAY0Q,SAAS,CAAC1Q,IAAtB;EACA,MAAA,KAAI,CAACH,IAAL,GAAYA,MAAI,CAAC6Q,SAAS,CAACnO,SAAV,EAAD,CAAhB;EACA,MAAA,KAAI,CAAC5B,SAAL,GAAiB+P,SAAS,CAAC/P,SAA3B;EACA,MAAA,KAAI,CAACpC,MAAL,GAAcmS,SAAS,CAACnS,MAAV,EAAd;EACA,MAAA,KAAI,CAACe,iBAAL,GAAyBoR,SAAS,CAAC/P,SAAV,CAAoBrB,iBAApB,CAAzB;EACH,KA/Ea;EACV,SAAKgM,mBAAL;EACH;;;0BA6CyB;EACtB,UAAMuE,eAAe,GAAG,CAAC,CAAC,KAAK9P,YAAL,GAAoB4Q,MAA9C;EACA,UAAMC,YAAY,GAAG,KAAKrQ,iBAAL,OAA6B1B,UAAU,CAACE,MAA7D;EACA,aAAOsR,EAAE,CAACC,UAAH,CAAc,KAAKlQ,+BAAL,IAAwCyP,eAAxC,IAA2De,YAAzE,CAAP;EACH;;;0BAEqC;EAClC,aAAO,KAAKC,4BAAL,CAAkCzD,QAAlC,CAA2C,KAAK7O,MAAL,CAAY2I,WAAZ,EAA3C,CAAP;EACH;;;;AA2BL,cAAe,IAAIkJ,KAAJ,EAAf;;ECpFA,IAAMU,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,kBAAkB,EAAI;EAC1CA,EAAAA,kBAAkB,IAAIhJ,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,MAAA,CAAiB7B,YAAzC,EAAuDyP,kBAAvD,CAAtB;EACH,CAFD;EAIA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAC,sBAAsB,EAAI;EAClDA,EAAAA,sBAAsB,IAAIlJ,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,MAAA,CAAiB5B,gBAAzC,EAA2D0P,sBAA3D,CAA1B;EACH,CAFD;AAIA,EAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,OAAwE;EAAA,MAArEhT,oBAAqE,QAArEA,kBAAqE;EAAA,MAAjD6S,kBAAiD,QAAjDA,kBAAiD;EAAA,MAA7BE,sBAA6B,QAA7BA,sBAA6B;EACnG,MAAME,SAAS,GAAGjT,oBAAkB,CAACkP,QAAnB,CAA4BjK,kBAAA,CAA6B/E,OAAzD,CAAlB;EACA2J,EAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,MAAA,CAAiB9B,OAAzC,EAAkD8P,SAAlD;EAEA,MAAIA,SAAJ,EAAe;EACXL,IAAAA,eAAe,CAACC,kBAAD,CAAf;EACAC,IAAAA,mBAAmB,CAACC,sBAAD,CAAnB;EACH;EACJ,CARM;AAUP,EAAO,IAAM9P,kBAAgB,GAAG,SAAnBA,gBAAmB,CAAA4B,uBAAuB,EAAI;EACvD,MAAMqO,cAAc,GAAGnO,KAAK,CAACC,GAAN,CAAUC,QAAA,CAAmBxD,MAA7B,CAAvB;EACA,MAAM4H,OAAO,GAAG;EAAEjE,IAAAA,MAAM,EAAEP,uBAAV;EAAmCQ,IAAAA,QAAQ,EAAE,kBAA7C;EAAiEC,IAAAA,iBAAiB,EAAE4N;EAApF,GAAhB;EAEA5I,EAAAA,2BAA2B,CAAC,YAAM;EAC9BzE,IAAAA,gBAAgB,CAACwD,OAAD,CAAhB;EACH,GAF0B,CAA3B;EAGH,CAPM;EASP,IAAM8D,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;EAC/B,MAAM5L,UAAQ,GAAG,IAAI2H,QAAJ,CAAajE,kBAAA,CAA6B/E,OAA1C,CAAjB;EACA,MAAMiT,QAAQ,GAAG5R,UAAQ,CAAC4R,QAAT,CAAkB;EAC/B/P,IAAAA,YAAY,EAAEuI,OAAO,CAAC5G,KAAK,CAACC,GAAN,CAAUC,MAAA,CAAiB7B,YAA3B,CAAD,CADU;EAE/BC,IAAAA,gBAAgB,EAAE0B,KAAK,CAACC,GAAN,CAAUC,MAAA,CAAiB5B,gBAA3B;EAFa,GAAlB,CAAjB;EAKA,MAAM+P,QAAQ,GAAG7R,UAAQ,CAAC6R,QAAT,EAAjB;EAEA,MAAMhK,aAAa,GAAG;EAAEgK,IAAAA,QAAQ,EAARA,QAAF;EAAYD,IAAAA,QAAQ,EAARA;EAAZ,GAAtB;EACA,MAAMhS,OAAK,GAAG4D,KAAK,CAACC,GAAN,CAAUC,KAAV,CAAd;EAEA,MAAMoO,OAAO,GAAGlS,OAAK,GAAG+E,cAAR,EAAhB;EAEA,MAAMoN,WAAW,GAAG;EAAEC,IAAAA,SAAS,EAAEF,OAAO,CAACE,SAAR,EAAb;EAAkCC,IAAAA,QAAQ,EAAEH,OAAO,CAACG,QAAR;EAA5C,GAApB;EACA,MAAMtN,cAAc,GAAG;EACnBuN,IAAAA,IAAI,EAAEJ,OAAO,CAACI,IAAR,EADa;EAEnBC,IAAAA,OAAO,EAAEL,OAAO,CAACM,eAAR,EAFU;EAInBC,IAAAA,UAAU,EAAEP,OAAO,CAACO,UAAR,EAJO;EAKnBC,IAAAA,eAAe,EAAER,OAAO,CAACS,aAAR,EALE;EAMnBC,IAAAA,MAAM,EAAEV,OAAO,CAACW,QAAR;EANW,GAAvB;EAQA,MAAM3K,OAAO,GAAG;EAAEe,IAAAA,IAAI,EAAE;EAAEkJ,MAAAA,WAAW,EAAXA,WAAF;EAAepN,MAAAA,cAAc,EAAdA;EAAf;EAAR,GAAhB;EACA,MAAM+N,eAAe,GAAG;EAAE7K,IAAAA,aAAa,EAAbA,aAAF;EAAiB/D,IAAAA,QAAQ,EAAE,uBAA3B;EAAoD8D,IAAAA,IAAI,EAAE,gBAA1D;EAA4EE,IAAAA,OAAO,EAAPA;EAA5E,GAAxB;EAEA9H,EAAAA,UAAQ,CAAC2S,cAAT,CAAwBD,eAAxB,EAAyC,UAAA1S,UAAQ,EAAI;EACjDsI,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,QAAA,CAAmBxD,MAA3C,EAAmDF,UAAnD;EACH,GAFD;EAGH,CA7BD;;EC3BO,IAAM4S,OAAO,GAAG,SAAVA,OAAU,OAAe;EAAA,MAAZ7L,KAAY,QAAZA,KAAY;EAClCuB,EAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,aAAxB,EAAiDqD,KAAjD;EACA,MAAMhG,qBAAmB,GAAGyC,KAAK,CAACC,GAAN,CAAUC,mBAAV,CAA5B;EACA,MAAMnD,MAAI,GAAGiD,KAAK,CAACC,GAAN,CAAUC,IAAV,CAAb;EACA,MAAM+C,MAAM,GAAGlG,MAAI,GAAGkG,MAAP,EAAf;EACA,MAAMnG,cAAY,GAAGS,qBAAmB,GAAG+F,qBAAqB,CAAC/F,qBAAD,EAAsB0F,MAAtB,EAA8BM,KAA9B,CAAxB,GAA+D,EAAvG;EAEAuB,EAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,YAAxB,EAAgDpD,cAAhD;EACH,CARM;AAUP,EAAO,IAAMuS,eAAe,GAAG,SAAlBA,eAAkB;EAAA,SAAMvK,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,QAAxB,EAA4C,IAA5C,CAAN;EAAA,CAAxB;EAEP,IAAMgI,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;EAC7B,MAAM1L,UAAQ,GAAG,IAAI2H,QAAJ,CAAajE,kBAAA,CAA6BhF,OAA1C,CAAjB;EACA,MAAMkT,QAAQ,GAAG5R,UAAQ,CAAC4R,QAAT,EAAjB;EACA,MAAMC,QAAQ,GAAG7R,UAAQ,CAAC6R,QAAT,EAAjB;EAEA,MAAM7Q,mBAAiB,GAAGwC,KAAK,CAACC,GAAN,CAAUC,iBAAV,CAA1B;EACA,MAAMoE,OAAO,GAAG;EAAEgL,IAAAA,aAAa,EAAE,KAAjB;EAAwBC,IAAAA,kBAAkB,EAAE,CAAC,CAAC/R,mBAAiB;EAA/D,GAAhB;EAEA,MAAM6G,aAAa,GAAG;EAAE+K,IAAAA,OAAO,EAAPA,OAAF;EAAWC,IAAAA,eAAe,EAAfA,eAAX;EAA4BjB,IAAAA,QAAQ,EAARA,QAA5B;EAAsCC,IAAAA,QAAQ,EAARA;EAAtC,GAAtB;EACA,MAAMa,eAAe,GAAG;EAAE7K,IAAAA,aAAa,EAAbA,aAAF;EAAiB/D,IAAAA,QAAQ,EAAE,qBAA3B;EAAkD8D,IAAAA,IAAI,EAAE,MAAxD;EAAgEE,IAAAA,OAAO,EAAPA;EAAhE,GAAxB;EAEA9H,EAAAA,UAAQ,CAAC2S,cAAT,CAAwBD,eAAxB,EAAyC,UAAA1S,UAAQ,EAAI;EACjDsI,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,QAAA,CAAmBzD,IAA3C,EAAiDD,UAAjD;EACH,GAFD;EAGH,CAdD;;ECbA,IAAMgT,OAAO,GAAG,SAAVA,OAAU,CAAAC,aAAa;EAAA,SAAI,UAAUA,aAAd;EAAA,CAA7B;EACA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAAD,aAAa;EAAA,SAAID,OAAO,CAACC,aAAD,CAAP,IAA0BA,aAAa,CAACrL,IAAd,KAAuB,QAArD;EAAA,CAAjC;EACA,IAAMuH,UAAU,GAAG,SAAbA,UAAa,CAAA8D,aAAa;EAAA,SAAIC,WAAW,CAACD,aAAD,CAAX,IAA8B,aAAaA,aAA/C;EAAA,CAAhC;EACA,IAAME,UAAU,GAAG,SAAbA,UAAa,CAAAF,aAAa;EAAA,SAAI9D,UAAU,CAAC8D,aAAD,CAAV,IAA6BA,aAAa,CAACG,OAAd,CAAsBlC,MAAtB,KAAiC,CAAlE;EAAA,CAAhC;EACA,IAAMmC,SAAS,GAAG,SAAZA,SAAY,CAAAJ,aAAa;EAAA,SAAIE,UAAU,CAACF,aAAD,CAAV,IAA6BA,aAAa,CAACG,OAAd,CAAsB,CAAtB,CAAjC;EAAA,CAA/B;EACA,IAAM3R,SAAO,GAAG,SAAVA,OAAU,CAACwR,aAAD,EAAgB5N,GAAhB,EAAqBC,KAArB;EAAA,SAA+B+N,SAAS,CAACJ,aAAD,CAAT,IAA4BI,SAAS,CAACJ,aAAD,CAAT,CAAyB5N,GAAzB,MAAkCC,KAA7F;EAAA,CAAhB;EAEA,IAAMgO,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAL,aAAa,EAAI;EAC1C,MAAMM,QAAQ,GAAG9R,SAAO,CAACwR,aAAD,EAAgB,KAAhB,EAAuB,QAAvB,CAAxB;EACA,MAAMO,QAAQ,GAAG/R,SAAO,CAACwR,aAAD,EAAgB,MAAhB,EAAwB,QAAxB,CAAxB;EACA,MAAMhE,OAAO,GAAGsE,QAAQ,IAAIC,QAA5B;EAEA,SAAOvE,OAAP;EACH,CAND;EAQA,IAAMwE,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACrF,GAAD,EAAMsF,kBAAN,EAA6B;EAAA,MAC7C9L,IAD6C,GACpC8L,kBADoC,CAC7C9L,IAD6C;EAErD,MAAM5H,QAAQ,GAAG,IAAI2H,QAAJ,CAAaC,IAAb,CAAjB;EACA,MAAMgK,QAAQ,GAAG5R,QAAQ,CAAC4R,QAAT,EAAjB;EACA,MAAMC,QAAQ,GAAG7R,QAAQ,CAAC6R,QAAT,EAAjB;EAEA,MAAMhK,aAAa,GAAG;EAAEgK,IAAAA,QAAQ,EAARA,QAAF;EAAYD,IAAAA,QAAQ,EAARA,QAAZ;EAAsBpK,IAAAA,aAAa,EAAE;EAArC,GAAtB;EAEA,MAAMkL,eAAe,GAAG,SAAlBA,eAAkB,CAAA9K,IAAI;EAAA,WAAK;EAAEC,MAAAA,aAAa,EAAbA,aAAF;EAAiB/D,MAAAA,QAAQ,mBAAY8D,IAAZ,aAAzB;EAAqDA,MAAAA,IAAI,EAAJA;EAArD,KAAL;EAAA,GAA5B;EACA5H,EAAAA,QAAQ,CAAC2S,cAAT,CAAwBD,eAAe,CAAC9K,IAAD,CAAvC,EAA+C,UAAA5H,QAAQ;EAAA,8BAAUoO,GAAV,sBAAgBxG,IAAhB,EAAuB5H,QAAvB;EAAA,GAAvD;EACH,CAVD;EAYA,IAAM2L,0BAA0B,GAAG,SAA7BA,0BAA6B,OAAwB;EAAA,MAArBgI,cAAqB,QAArBA,cAAqB;EACvD,MAAM5R,qBAAmB,GAAG4R,cAAc,CAACtM,MAAf,CAAsBiM,oBAAtB,CAA5B;EACAhL,EAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,mBAAxB,EAAuD3B,qBAAvD;EACA,MAAM6R,2BAA2B,GAAG7R,qBAAmB,CAACwM,MAApB,CAA2BkF,mBAA3B,EAAgD,EAAhD,CAApC;EAEAnL,EAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,QAAA,CAAmB9E,KAA3C,EAAkDgV,2BAAlD;EACH,CAND;;MCrBMC;;;mCACMrQ;gDAEa,gBAOf;EAAA,QANFsQ,qBAME,QANFA,qBAME;EAAA,QALFlT,aAKE,QALFA,WAKE;EAAA,QAJF4P,aAIE,QAJFA,aAIE;EAAA,QAHFc,kBAGE,QAHFA,kBAGE;EAAA,QAFFE,sBAEE,QAFFA,sBAEE;EAAA,QADF/S,kBACE,QADFA,kBACE;EACF6J,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,WAAxB,EAA+C9C,aAA/C;EAEA4C,IAAAA,KAAK,CAACC,GAAN,CAAUC,+BAAV,KAAwD,KAAI,CAACqQ,eAAL,CAAqBD,qBAArB,CAAxD;EACAxL,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,iBAAxB,EAAqD8M,aAArD;EAEAiB,IAAAA,eAAe,CAAC;EACZH,MAAAA,kBAAkB,EAAE0C,MAAM,CAAC1C,kBAAD,CADd;EAEZE,MAAAA,sBAAsB,EAAtBA,sBAFY;EAGZ/S,MAAAA,kBAAkB,EAAlBA;EAHY,KAAD,CAAf;EAKH;6CAEiB,YAAM;EACpB,IAAA,KAAI,CAACwV,yBAAL;EADoB,QAGZC,mBAHY,GAGY,KAAI,CAACC,IAAL,GAAYC,qBAHxB,CAGZF,mBAHY;EAIpB,IAAA,KAAI,CAACG,kBAAL,CAAwBH,mBAAxB;EACH;6CAEiB,UAAAnT,qBAAmB,EAAI;EACrC,QAAI;EACAuH,MAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,mBAAxB,EAAuDU,IAAI,CAAC8H,KAAL,CAAWnL,qBAAX,CAAvD;EACH,KAFD,CAEE,OAAOuT,CAAP,EAAU;EACR,UAAMpT,WAAS,GAAGsC,KAAK,CAACC,GAAN,CAAUC,SAAV,CAAlB;EADQ,UAEAnF,yBAFA,GAE8BmF,aAF9B,CAEAnF,yBAFA;EAGR,UAAMgW,MAAM,GAAGrT,WAAS,CAAC3C,yBAAD,CAAxB;EACA2L,MAAAA,QAAQ,CAACC,SAAT,CAAmB,cAAnB,EAAmCoK,MAAnC,EAA2C,IAA3C;EACH;EACJ;uDAE2B,YAAM;EAAA,QACtBvV,MADsB,GACX0E,SADW,CACtB1E,MADsB;EAAA,QAEtBC,QAFsB,GAEDD,MAFC,CAEtBC,QAFsB;EAAA,QAEZH,QAFY,GAEDE,MAFC,CAEZF,MAFY;EAI9B,QAAM0V,UAAU,GAAGhR,KAAK,CAACC,GAAN,CAAUC,MAAV,EAA4B+D,WAA5B,EAAnB;EACA,QAAMgN,YAAY,GAAG,KAAI,CAAClU,IAAL,GAAYkU,YAAZ,EAArB;EACA,QAAMC,UAAU,GAAG5V,QAAM,KAAK0V,UAA9B;EACA,QAAMG,OAAO,GAAGF,YAAY,CAAChN,WAAb,OAA+BxI,QAA/C;EAEAqJ,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,aAAxB,EAAiDgR,UAAU,IAAIC,OAA/D;EACH;+CAEmB,UAAAnG,QAAQ,EAAI;EAC5B,QAAMoG,UAAU,GAAGpG,QAAQ,CAACqG,MAAT,KAAoB,UAAvC;EACAD,IAAAA,UAAU,IAAItM,YAAY,CAAC1I,KAAb,CAAmBwF,IAAnB,CAAwB1B,WAAxB,EAA+C8K,QAA/C,CAAd;EACH;0CAEc,YAAM;EACjB,IAAA,KAAI,CAACsG,KAAL;EACH;oCAEQ,UAAAC,MAAM,EAAI;EACfvR,IAAAA,KAAK,CAACwR,IAAN,CAAWD,MAAX;EACAE,IAAAA,MAAM,CAACC,MAAP,CAAc,KAAd,EAAoBH,MAApB,EAA4B;EAAEvR,MAAAA,KAAK,EAALA;EAAF,KAA5B;EAEA,IAAA,KAAI,CAAC2R,eAAL;EACA,IAAA,KAAI,CAACC,iBAAL;EACH;sCAEU,YAAM;EACb9M,IAAAA,YAAY,CAACM,SAAb,CAAuBxD,IAAvB,CAA4B1B,MAA5B;EACH;mCAEO,YAAM;EACV4E,IAAAA,YAAY,CAAC9E,KAAb,CAAmB4B,IAAnB,CAAwB1B,YAAxB,EAAgD,EAAhD;EACH;4CAEgB,YAAM;EACnB,QAAIF,KAAK,CAACwN,GAAN,CAAUtN,YAAV,CAAJ,EAAuC;EAAA,uBACaF,KAAK,CAACC,GAAN,CAAUC,YAAV,CADb;EAAA,UAC3BuI,UAD2B,cAC3BA,UAD2B;EAAA,UACf3I,uBADe,cACfA,uBADe;EAEnC,UAAM+R,kBAAkB,GAAGpJ,UAAU,KAAKvI,gBAA1C;EACA2R,MAAAA,kBAAkB,IAAI3T,kBAAgB,CAAC4B,uBAAD,CAAtC;EACH;EACJ;+CAEmB,YAAM;EAAA,6BAUlBqJ,MAAM,CAACC,UAVW;EAAA,QAElB0I,qBAFkB,sBAElBA,qBAFkB;EAAA,QAGlBC,YAHkB,sBAGlBA,YAHkB;EAAA,QAIlB1I,qBAJkB,sBAIlBA,qBAJkB;EAAA,QAKlBI,eALkB,sBAKlBA,eALkB;EAAA,QAMlBuI,aANkB,sBAMlBA,aANkB;EAAA,QAOlBC,YAPkB,sBAOlBA,YAPkB;EAAA,QAQlBvI,wBARkB,sBAQlBA,wBARkB;EAAA,QASlBwI,gBATkB,sBASlBA,gBATkB;EAYtB,QAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,EAAE,EAAI;EAC3BtN,MAAAA,YAAY,CAAC1I,KAAb,CAAmBwF,IAAnB,CAAwB1B,mBAAxB,EAAuDkS,EAAvD;EACH,KAFD;EAGAtT,IAAAA,CAAC,CAACiD,KAAF,CAAQ+P,qBAAR,EAA+B5P,SAA/B,CAAyCiQ,gBAAzC;EACArT,IAAAA,CAAC,CAACiD,KAAF,CAAQgQ,YAAR,EAAsB7P,SAAtB,CAAgC1D,aAAhC;EAEA,QAAMiI,YAAY,GAAG,KAAI,CAACrK,KAAL,GAAaiW,YAAlC;EACA,QAAMC,aAAa,GAAGlM,WAAW,CAAC;EAAEK,MAAAA,YAAY,EAAZA;EAAF,KAAD,CAAjC;EAEA3H,IAAAA,CAAC,CAACiD,KAAF,CAAQsH,qBAAR,EAA+BnH,SAA/B,CAAyCoQ,aAAzC;EACAxT,IAAAA,CAAC,CAACiD,KAAF,CAAQ0H,eAAR,EAAyBvH,SAAzB,CAAmC/C,cAAnC;EACAL,IAAAA,CAAC,CAACiD,KAAF,CAAQiQ,aAAR,EAAuB9P,SAAvB,CAAiC,KAAI,CAACoP,KAAtC;EACAxS,IAAAA,CAAC,CAACiD,KAAF,CAAQkQ,YAAR,EAAsB/P,SAAtB,CAAgC,KAAI,CAACqQ,iBAArC;EACAzT,IAAAA,CAAC,CAACiD,KAAF,CAAQ2H,wBAAR,EAAkCxH,SAAlC,CAA4C,KAAI,CAACsQ,cAAjD;EAEA,QAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;EACtB,UAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAC,EAAE;EAAA,eAAIA,EAAE,CAAC/N,SAAH,CAAaC,MAAb,CAAoB,MAApB,EAA4B,IAA5B,CAAJ;EAAA,OAAjC;EACAH,MAAAA,QAAQ,CAACkO,gBAAT,CAA0B,iBAA1B,EAA6CC,OAA7C,CAAqDH,sBAArD;EACH,KAHD;EAKA5T,IAAAA,CAAC,CAACiD,KAAF,CAAQmQ,gBAAR,EAA0BhQ,SAA1B,CAAoCuQ,WAApC;EACH;;EAGL,IAAMK,EAAE,GAAG,IAAIzC,SAAJ,EAAX;;;;;;;;"}