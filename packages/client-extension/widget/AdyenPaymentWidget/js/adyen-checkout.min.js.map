{"version":3,"file":"adyen-checkout.min.js","sources":["constants/index.js","utils/spinner.js","utils/ajax.js","utils/redirectAuth.js","utils/getOrderPayload.js","utils/events.js","utils/getInstallmentOptions.js","utils/checkout.js","utils/modal.js","utils/createError.js","utils/date.js","components/component.js","components/order.js","components/payment.js","components/store.js","components/boleto/index.js","components/card/index.js","components/local/index.js","adyen-checkout.js"],"sourcesContent":["export const baseAPIUrl = '/ccstorex/custom/adyen/v1'\nexport const channels = { preview: 'preview', storefront: 'storefront' }\nexport const errorMessages = {\n    paymentRefused: 'paymentRefused',\n    installmentsConfiguration: 'installmentsConfiguration',\n    failed3dsValidation: 'failed3dsValidation',\n}\nexport const paymentMethodTypes = {\n    generic: 'generic',\n    invoice: 'invoice',\n    local: 'local',\n}\nexport const adyenCheckoutComponentUrl = 'https://checkoutshopper-live.adyen.com/checkoutshopper/sdk/3.3.0/adyen.js'\nexport const locale = 'locale'\nexport const countries = {\n    brazil: { locale: 'pt_br', currency: 'brl' },\n    mexico: { locale: 'es_mx', currency: 'mxn' },\n}\nexport const brazilEnabled = 'brazilEnabled'\nexport const comboCards = { debit: 'debitCard', credit: 'creditCard' }\nexport const bins = { electron: 'electron', maestro: 'maestro' }\nexport const storage = { paymentData: 'AdyenPaymentData', order: 'AdyenOrder' }\nexport const noInstallmentsMsg = 'noInstallmentsMsg'\n\nexport const render = 'render'\nexport const id = 'id'\nexport const order = 'order'\nexport const checkout = {\n    card: 'checkoutCard',\n    boleto: 'checkoutBoleto',\n    local: 'checkoutLocal',\n}\nexport const isLoaded = 'isLoaded'\nexport const ajax = 'ajax'\nexport const originKey = 'originKey'\nexport const installments = 'installments'\nexport const cart = 'cart'\nexport const setPayment = 'setPayment'\nexport const setDone = 'setDone'\nexport const initialOrderCreated = 'initialOrderCreated'\nexport const pageChanged = 'pageChanged'\nexport const installmentsEnabled = 'installmentsEnabled'\nexport const isAllowedCountryForInstallments = 'isAllowedCountryForInstallments'\nexport const environment = 'environment'\nexport const selectedBrand = 'selectedBrand'\nexport const selectedComboCard = 'selectedComboCard'\nexport const installmentsOptions = 'installmentOptions'\nexport const storedPaymentType = 'storedPaymentType'\nexport const paymentMethodsResponse = 'paymentMethodsResponse'\nexport const translate = 'translate'\nexport const isPaymentStored = 'isPaymentStored'\nexport const paymentDetails = 'paymentDetails'\nexport const selectedInstallment = 'selectedInstallment'\nexport const comboCardOptions = 'comboCardOptions'\nexport const genericPayment = 'genericPayment'\nexport const isDone = 'isDone'\nexport const isValid = 'isValid'\nexport const pageParams = 'pageParams'\nexport const presentToShopper = 'PresentToShopper'\nexport const orderPayload = 'orderPayload'\nexport const boleto = {\n    enabled: 'boletoEnabled',\n    deliveryDate: 'boletoDeliveryDate',\n    shopperStatement: 'boletoShopperStatement',\n}\n","import spinner from 'spinner'\nimport $ from 'jquery'\n\nexport const createSpinner = () => {\n    const indicatorOptions = {\n        parent: '#loadingModal',\n        posTop: '20%',\n        posLeft: '50%',\n        loadingText: 'Loading',\n    }\n    $('#loadingModal').removeClass('hide')\n    $('#loadingModal').show()\n    spinner.create(indicatorOptions)\n}\n\nexport const destroySpinner = () => {\n    $('#loadingModal').hide()\n    spinner.destroy()\n}\n","import $ from 'jquery'\nimport { baseAPIUrl, channels } from '../constants'\n\nexport default isPreview => {\n    return (path, cb, method = 'get') => {\n        $.ajax({\n            url: `${baseAPIUrl}/${path}`,\n            method,\n            headers: {\n                'x-oracle-cc-webhook-signature': 'ABC123',\n                channel: isPreview ? channels.preview : channels.storefront,\n            },\n            success: cb,\n        })\n    }\n}\n","import storageApi from 'storageApi'\nimport * as constants from '../constants'\nimport { store } from '../components'\nimport { createFromAction } from './index'\n\nexport default ({ order, customPaymentProperties }, cb) => {\n    const checkoutCard = store.get(constants.checkout.card)\n    const isAuthRedirect = 'paymentData' in customPaymentProperties\n    const redirect = () => {\n        const action = {\n            action: customPaymentProperties,\n            selector: '#adyen-card-payment',\n            checkoutComponent: checkoutCard,\n        }\n\n        const instance = storageApi.getInstance()\n        instance.setItem(constants.storage.paymentData, customPaymentProperties.paymentData)\n        instance.setItem(constants.storage.order, JSON.stringify(order))\n\n        createFromAction(action)\n    }\n\n    isAuthRedirect ? redirect() : cb(order)\n}\n","export default function getOrderPayload(order) {\n    const { shippingAddress: shippingAddressFn, billingAddress: billingAddressFn, cart, payments } = order()\n\n    const { billingAddress, shippingAddress, id, orderProfileId, shippingMethod, shoppingCart } = order().order()\n\n    return {\n        billingAddress: {\n            ...billingAddressFn(),\n            ...billingAddress,\n        },\n        combineLineItems: cart().combineLineItems,\n        op: 'initiate',\n        id,\n        payments: payments(),\n        profileId: orderProfileId,\n        shippingAddress: {\n            ...shippingAddressFn(),\n            ...shippingAddress,\n        },\n        shippingMethod,\n        shoppingCart,\n    }\n}\n","import $ from 'jquery'\n\nclass Emitter {\n    store = {\n        emit: (key, value) => $.Topic('store').publish(key, value),\n        listen: cb => $.Topic('store').subscribe(cb),\n    }\n\n    _ev = suffix => ({\n        emit: (event, ...args) => $.Topic(`${suffix}-${event}`).publish(...args),\n        on: (event, cb) => $.Topic(`${suffix}-${event}`).subscribe(cb),\n    })\n\n    emit = (key, ...args) => $.Topic(key).publish(...args)\n\n    payment = this._ev('payment')\n    order = this._ev('order')\n    component = this._ev('component')\n\n    on = (event, cb) => $.Topic(event).subscribe(cb)\n}\n\nexport default new Emitter()\n","const creditCards = [\n    { id: 1, name: 'Amex', code: 'amex' },\n    // {id: \"argencard\", name: \"Argencard\"},\n    // {id: \"bcmc\", name: \"Bancontact/Mister Cash\"},\n    // {id: \"bijcard\", name: \"de Bijenkorf Card\"},\n    // {id: \"cabal\", name: \"Cabal\"},\n    // {id: \"cartebancaire\", name: \"Carte Bancaires\"},\n    // {id: \"codensa\", name: \"Codensa\"},\n    // {id: \"cup\", name: \"China Union Pay\"},\n    // {id: \"dankort\", name: \"Dankort\"},\n    // {id: \"diners\", name: \"Diners Club\"},\n    // {id: \"discover\", name: \"Discover\"},\n    { id: 2, name: 'ELO', code: 'elo' },\n    // {id: \"forbrugsforeningen\", name: \"Forbrugsforeningen\"},\n    { id: 4, name: 'HiperCard', code: 'hiper' },\n    { id: 4, name: 'HiperCard', code: 'hipercard' },\n    // {id: \"jcb\", name: \"JCB\"},\n    // {id: \"karenmillen\", name: \"Karen Millen GiftCard\"},\n    // {id: \"laser\", name: \"Laser\"},\n    // {id: \"maestro\", name: \"Maestro\"},\n    // {id: \"maestrouk\", name: \"Maestro UK\"},\n    { id: 8, name: 'Mastercard', code: 'mc' },\n    // {id: \"mcalphabankbonus\", name: \"Alpha Bank Mastercard Bonus\"},\n    // {id: \"mir\", name: \"MIR\"},\n    // {id: \"naranja\", name: \"Naranja\"},\n    // {id: \"oasis\", name: \"Oasis GiftCard\"},\n    // {id: \"shopping\", name: \"Tarjeta Shopping\"},\n    // {id: \"solo\", name: \"Solo\"},\n    // {id: \"troy\", name: \"Troy\"},\n    // {id: \"uatp\", name: \"UATP\"},\n    { id: 16, name: 'Visa', code: 'visa' },\n    // {id: \"visaalphabankbonus\", name: \"Alpha Bank Visa Bonus\"},\n    // {id: \"visadankort\", name: \"Visa Dankort\"},\n    // {id: \"warehouse\", name: \"Warehouse GiftCard\"},\n]\n\nconst isAllowedCreditCard = (creditCard, creditCardSum) => (parseInt(creditCardSum) & creditCard.id) !== 0\nconst checkSum = (creditCard, creditCardSum) => creditCard && isAllowedCreditCard(creditCard, creditCardSum)\nconst checkAmount = (amount, amountRange) => amount >= amountRange\nconst validate = (hasValidSum, isValidAmount) => hasValidSum && isValidAmount\n\nfunction getInstallmentOptions(installmentsOptions, amount, brand) {\n    const creditCard = creditCards.find(({ code }) => brand === code)\n    const createInstallmentsObj = item => {\n        const [amountRange, numberOfInstallments, creditCardSum] = item\n        const hasValidSum = checkSum(creditCard, creditCardSum)\n        const isValidAmount = checkAmount(amount, amountRange)\n        const isValid = validate(hasValidSum, isValidAmount)\n\n        return isValid && { numberOfInstallments }\n    }\n\n    return installmentsOptions.map(createInstallmentsObj, []).filter(valid => valid)\n}\n\nexport default getInstallmentOptions\n","import ccConstants from 'ccConstants'\nimport { store } from '../components'\nimport * as constants from '../constants'\nimport { eventEmitter } from './index'\n\nexport const getDefaultConfig = () => {\n    const environment = store.get(constants.environment)\n    const locale = store.get(constants.locale)\n    const originKey = store.get(constants.originKey)\n    const paymentMethodsResponse = store.get(constants.paymentMethodsResponse)\n\n    return {\n        showPayButton: true,\n        locale,\n        environment: environment.toLowerCase(),\n        originKey,\n        paymentMethodsResponse,\n    }\n}\n\nexport const createFromAction = ({ action, selector, checkoutComponent }) => {\n    checkoutComponent.createFromAction(action).mount(selector)\n}\n\nclass Checkout {\n    constructor(type) {\n        this.type = type\n    }\n\n    createCheckout = ({ configuration, selector, type, options = {} }, cb) => {\n        const defaultConfiguration = getDefaultConfig()\n        // eslint-disable-next-line no-undef\n        const checkout = new AdyenCheckout({ ...defaultConfiguration, ...configuration })\n        checkout.create(type, options).mount(selector)\n\n        cb(checkout)\n    }\n\n    onSubmit = () => () => {\n        const loader = document.querySelector(`#adyen-${this.type}-wrapper .loader-wrapper`)\n        loader && loader.classList.toggle('hide', false)\n\n        const order = store.get(constants.order)\n        eventEmitter.payment.emit(constants.setPayment, this.type)\n\n        order().id(null)\n        order().op(ccConstants.ORDER_OP_INITIATE)\n        order().handlePlaceOrder()\n    }\n\n    onChange = options => (state, component) => {\n        const paymentDetails = store.get(constants.paymentDetails)\n        const isValid = component.isValid && typeof state.data === 'object'\n        eventEmitter.store.emit(constants.isValid, isValid)\n\n        const payload = { ...paymentDetails, [this.type]: { ...state.data, ...options } }\n\n        eventEmitter.store.emit(constants.paymentDetails, payload)\n    }\n}\n\nexport default Checkout\n","export const createPresentToShopperModal = cb => {\n    const node = document.createElement('div')\n    node.setAttribute(\n        'style',\n        'display: flex;justify-content: center;align-content: center;top: 0;position: fixed;z-index: 999;' +\n            'align-items: center;'\n    )\n\n    const wrapper = document.createElement('div')\n    wrapper.setAttribute('style', 'height: 100vh; width: 100vw; background-color: #a4a4a494; z-index: 999;')\n    wrapper.setAttribute('id', 'present-shopper-wrapper')\n\n    const modal = document.createElement('div')\n    modal.setAttribute('id', 'present-shopper')\n    modal.setAttribute('style', 'z-index: 9999;position: absolute;')\n\n    const clickEvent = () => {\n        wrapper.removeEventListener('click', clickEvent)\n        node.remove()\n    }\n\n    wrapper.addEventListener('click', clickEvent)\n\n    node.innerHTML =\n        '<link rel=\"stylesheet\" href=\"https://checkoutshopper-live.adyen.com/checkoutshopper/sdk/3.2.0/adyen.css\" />'\n    node.appendChild(modal)\n    node.appendChild(wrapper)\n\n    document.body.appendChild(node)\n    cb(node)\n}\n","import notifier from 'notifier'\nimport navigation from 'navigation'\nimport { destroySpinner } from './spinner'\n\nconst createError = (options, preserveUrl = false) => ({ errorMessage = 'The payment is REFUSED.' } = {}) => {\n    'redirectLink' in options && navigation.goTo(options.redirectLink, preserveUrl)\n    destroySpinner()\n    notifier.sendError('adyen', errorMessage, true)\n}\n\nexport default createError\n","export const addDays = days => new Date().setDate(new Date().getDate() + days)\n","import $ from 'jquery'\nimport * as constants from '../constants'\nimport { eventEmitter } from '../utils'\nimport { createBoletoCheckout, createCardCheckout, createLocalPaymentCheckout, store } from './index'\n\nclass Component {\n    constructor() {\n        this.startEventListeners()\n    }\n\n    startEventListeners = () => {\n        eventEmitter.component.on(constants.render, this.render)\n        eventEmitter.component.on(constants.comboCardOptions, this.getComboCardOptions)\n    }\n\n    getBrand = (brands, brand) =>\n        brand in brands ? brands[store.get(constants.selectedBrand)] : store.get(constants.selectedBrand)\n    getComboCardOptions = () => {\n        const brands = { visa: constants.bins.electron, mastercard: constants.bins.maestro }\n        const selectedComboCard = store.get(constants.selectedComboCard)()\n        const isDebitCard = selectedComboCard === constants.comboCards.debit\n        const brand = store.get(constants.selectedBrand)\n        const selectedBrand = this.getBrand(brands, brand)\n\n        const options = { selectedBrand, additionalData: { overwriteBrand: true } }\n\n        eventEmitter.store.emit(constants.comboCardOptions, isDebitCard ? options : {})\n    }\n\n    getOriginKeysSuccessResponse = originKeysRes => {\n        const { origin } = window.location\n        eventEmitter.store.emit(constants.originKey, originKeysRes.originKeys[origin])\n        store.get(constants.ajax)('paymentMethods', this.getPaymentMethods)\n    }\n\n    render = () => {\n        store.get(constants.ajax)('originKeys', this.getOriginKeysSuccessResponse)\n    }\n\n    getPaymentMethods = paymentMethodsResponse => {\n        eventEmitter.store.emit(constants.paymentMethodsResponse, paymentMethodsResponse)\n\n        $.getScript(constants.adyenCheckoutComponentUrl, () => {\n            createCardCheckout()\n            createLocalPaymentCheckout(paymentMethodsResponse)\n            store.get(constants.brazilEnabled) && createBoletoCheckout()\n        })\n    }\n}\n\nexport default Component\n","import $ from 'jquery'\nimport ccRestClient from 'ccRestClient'\nimport ccConstants from 'ccConstants'\nimport storageApi from 'storageApi'\nimport pubsub from 'pubsub'\nimport { redirectAuth, createSpinner, getOrderPayload, eventEmitter } from '../utils'\nimport * as constants from '../constants'\nimport { store } from './index'\n\nclass Order {\n    constructor() {\n        this.instance = storageApi.getInstance()\n\n        this.startEventListeners()\n    }\n\n    startEventListeners = () => {\n        eventEmitter.order.on(constants.pageChanged, this.getUrlParametersAndCreateOrder)\n        eventEmitter.order.on(constants.initialOrderCreated, this.initialOrderCreated)\n    }\n\n    initialOrderCreated = orderEvent => {\n        const order = store.get(constants.order)\n        const { customPaymentProperties } = orderEvent.order.payments[0]\n        const { data, resultCode } = customPaymentProperties\n\n        const payload = { order: getOrderPayload(order), customPaymentProperties: JSON.parse(data), resultCode }\n\n        eventEmitter.store.emit(constants.orderPayload, payload)\n        const isDone = store.get(constants.isDone)\n        !isDone() && redirectAuth(payload, this.createOrder)\n    }\n\n    getAndCreatOrder = result => {\n        result.paymentData = this.instance.getItem(constants.storage.paymentData)\n\n        const payment = { type: 'generic', customProperties: result }\n\n        this.recreateOrder(payment)\n    }\n\n    createOrder = orderPayload => {\n        const orderFail = ({ message = 'Failed to create order' } = {}) => {\n            $.Topic(pubsub.topicNames.ORDER_SUBMISSION_FAIL).publish({ message: 'fail', errorMessage: message })\n        }\n\n        const completeOrder = ({ id, uuid }) => {\n            eventEmitter.store.emit(constants.isDone, true)\n            const publishData = { message: 'success', id, uuid }\n            $.Topic(pubsub.topicNames.ORDER_COMPLETED).publish(publishData)\n            $.Topic(pubsub.topicNames.ORDER_SUBMISSION_SUCCESS).publish([publishData])\n        }\n\n        const submitOrder = data => {\n            const orderIsCompleted = orderPayload.op === 'complete'\n            const completedPayload = { ...orderPayload, op: 'complete' }\n            return orderIsCompleted ? completeOrder(data) : this.createOrder(completedPayload)\n        }\n\n        const orderSuccess = data => {\n            const { paymentState, message } = data.payments[0]\n            const { PAYMENT_GROUP_STATE_AUTHORIZED, PAYMENT_GROUP_STATE_INITIAL } = ccConstants\n            const validPaymentGroups = [PAYMENT_GROUP_STATE_AUTHORIZED, PAYMENT_GROUP_STATE_INITIAL]\n            const isValid = validPaymentGroups.includes(paymentState)\n            return isValid ? submitOrder(data) : orderFail({ message, data })\n        }\n\n        ccRestClient.request(ccConstants.ENDPOINT_ORDERS_CREATE_ORDER, orderPayload, orderSuccess, orderFail)\n    }\n\n    recreateOrder = paymentData => {\n        const storedOrder = JSON.parse(this.instance.getItem(constants.storage.order))\n        storedOrder.payments = [paymentData]\n\n        this.createOrder(storedOrder)\n    }\n\n    getResult = urlParameters => {\n        const params = urlParameters.split('&')\n        const formatResult = (acc, param) => {\n            const [key, value] = param.split('=')\n            return { ...acc, [key]: decodeURIComponent(value) }\n        }\n\n        return params.reduce(formatResult, {})\n    }\n\n    getUrlParametersAndCreateOrder = pageData => {\n        const order = store.get(constants.order)\n        const { parameters } = pageData\n\n        if (parameters) {\n            createSpinner()\n\n            const parametersObj = this.getResult(parameters)\n\n            this.cleanPaymentGatewayType(order)\n            this.setAction(parametersObj)\n        }\n    }\n\n    cleanPaymentGatewayType = order => {\n        if (order().paymentGateway()) {\n            order().paymentGateway().type = ''\n        }\n    }\n\n    setAction(parametersObj) {\n        this.isAction = this.hasParameters(parametersObj)\n        this.isAction && this.getAndCreatOrder(parametersObj)\n    }\n    checkIf3ds = parametersObj => 'PaRes' in parametersObj && 'MD' in parametersObj\n    checkIfLocal = parametersObj => 'payload' in parametersObj\n    hasParameters = parametersObj => {\n        const is3DS = this.checkIf3ds(parametersObj)\n        const isLocal = this.checkIfLocal(parametersObj)\n        const hasDetails = is3DS || isLocal\n        return hasDetails\n    }\n}\n\nexport default Order\n","import * as constants from '../constants'\nimport { eventEmitter } from '../utils'\nimport { store } from './index'\n\nclass Payment {\n    constructor() {\n        this.startEventListeners()\n    }\n\n    startEventListeners = () => {\n        eventEmitter.payment.on(constants.setPayment, this.setPayment)\n    }\n\n    setPayment = type => {\n        const order = store.get(constants.order)\n        const id = store.get(constants.id)\n\n        const genericPayment = store.get(constants.genericPayment)\n        const updatedGenericPayment = { ...genericPayment, id: id() }\n\n        eventEmitter.store.emit(constants.genericPayment, updatedGenericPayment)\n        eventEmitter.component.emit(constants.comboCardOptions)\n\n        const payments = [updatedGenericPayment]\n\n        order().updatePayments(payments)\n\n        this.updatePayment(this.createPayment(type))\n    }\n\n    updatePayment = pPayment => {\n        const order = store.get(constants.order)\n        const id = store.get(constants.id)\n\n        const payments = order().payments()\n        const checkId = (curId, id) => curId && curId === id()\n        const setPayments = (payment, index) => {\n            const curPayment = payments[index]\n            const { id: curId } = curPayment\n            const isSameId = checkId(curId, id)\n            return isSameId ? pPayment : curPayment\n        }\n\n        const newPayments = payments.map(setPayments)\n        order().payments(newPayments)\n    }\n\n    createPayment = type => {\n        const storedPaymentType = store.get(constants.storedPaymentType)\n        const isPaymentStored = store.get(constants.isPaymentStored)\n        const paymentDetails = store.get(constants.paymentDetails)\n        const selectedInstallment = store.get(constants.selectedInstallment)\n        const selectedComboCard = store.get(constants.selectedComboCard)\n        const comboCardOptions = store.get(constants.comboCardOptions)\n\n        const hasInstallments = this.checkSelectedInstallment(selectedInstallment)\n\n        const isCreditCard = selectedComboCard() === constants.comboCards.credit\n        const isValid = this.validateInstallment(hasInstallments, isCreditCard)\n\n        const storedPayment = this.getStoredPayment(isPaymentStored, storedPaymentType)\n        const numberOfInstallments = this.getInstallments(isValid, selectedInstallment)\n\n        const genericPayment = store.get(constants.genericPayment)\n        const customProperties = {\n            paymentDetails: paymentDetails[type],\n            storedPayment,\n            ...(numberOfInstallments && { numberOfInstallments }),\n            ...comboCardOptions,\n        }\n        const updatedGenericPayment = { ...genericPayment, customProperties }\n\n        return updatedGenericPayment\n    }\n\n    checkSelectedInstallment = selectedInstallment =>\n        selectedInstallment() && 'numberOfInstallments' in selectedInstallment()\n    getInstallments = (isValid, selectedInstallment) => isValid && parseInt(selectedInstallment().numberOfInstallments)\n    validateInstallment = (hasInstallments, isCreditCard) => hasInstallments && isCreditCard\n    getStoredPayment = (isPaymentStored, storedPaymentType) => (isPaymentStored ? storedPaymentType() : '')\n}\n\nexport default Payment\n","import ko from 'knockout'\nimport { comboCards, noInstallmentsMsg, countries } from '../constants'\nimport { ajax, eventEmitter } from '../utils'\nimport { Component, Order, Payment } from './index'\n\nclass Store {\n    constructor() {\n        this.startEventListeners()\n    }\n\n    brazilEnabled = false\n\n    storedPaymentType = ko.observable('')\n    environment = undefined\n    pageParams = undefined\n\n    // Component\n    component = new Component()\n    checkout = undefined\n    originKey = ''\n    isValid = false\n    selectedBrand = undefined\n    creditCard = comboCards.credit\n    debitCard = comboCards.debit\n    comboCards = ko.observable([comboCards.credit, comboCards.debit])\n    comboCardOptions = {}\n    selectedComboCard = ko.observable(comboCards.credit)\n    isPaymentStored = ko.observable(false)\n    paymentMethodsResponse = undefined\n    paymentDetails = undefined\n    isLoaded = ko.observable(false)\n    installments = ko.observable([])\n    selectedInstallment = ko.observable({})\n    installmentsAllowedCountries = [countries.mexico.locale, countries.brazil.locale]\n    installmentsOptions = []\n\n    // Payment\n    paymentComponent = new Payment()\n    genericPayment = { type: 'generic' }\n\n    // Order\n    orderComponent = new Order()\n    isDone = ko.observable(false)\n\n    // Boleto\n    boletoEnabled = false\n    boletoDeliveryDate = ''\n    boletoShopperStatement = ''\n\n    // Local\n    checkoutLocal = ko.observable([])\n\n    get installmentsEnabled() {\n        const hasInstallments = !!this.installments().length\n        const cardIsCredit = this.selectedComboCard() === comboCards.credit\n        return ko.observable(this.isAllowedCountryForInstallments && hasInstallments && cardIsCredit)\n    }\n\n    get isAllowedCountryForInstallments() {\n        return this.installmentsAllowedCountries.includes(this.locale.toLowerCase())\n    }\n\n    startEventListeners = () => {\n        eventEmitter.store.listen((key, value) => {\n            if (typeof this[key] === 'function') {\n                this[key](value)\n            } else {\n                this[key] = value\n            }\n        })\n    }\n\n    get = key => (this.has(key) ? this[key] : undefined)\n\n    has = key => key in this\n\n    init = viewModel => {\n        this.id = viewModel.id\n        this.order = viewModel.order\n        this.cart = viewModel.cart\n        this.ajax = ajax(viewModel.isPreview())\n        this.translate = viewModel.translate\n        this.locale = viewModel.locale()\n        this.noInstallmentsMsg = viewModel.translate(noInstallmentsMsg)\n    }\n}\n\nexport default new Store()\n","import * as constants from '../../constants'\nimport { addDays, Checkout, createPresentToShopperModal, eventEmitter, createFromAction } from '../../utils'\nimport { store } from '../index'\n\nconst setDeliveryDate = boletoDeliveryDate => {\n    boletoDeliveryDate && eventEmitter.store.emit(constants.boleto.deliveryDate, boletoDeliveryDate)\n}\n\nconst setShopperStatement = boletoShopperStatement => {\n    boletoShopperStatement && eventEmitter.store.emit(constants.boleto.shopperStatement, boletoShopperStatement)\n}\n\nexport const setBoletoConfig = ({ paymentMethodTypes, boletoDeliveryDate, boletoShopperStatement }) => {\n    const hasBoleto = paymentMethodTypes.includes(constants.paymentMethodTypes.invoice)\n    eventEmitter.store.emit(constants.boleto.enabled, hasBoleto)\n\n    if (hasBoleto) {\n        setDeliveryDate(boletoDeliveryDate)\n        setShopperStatement(boletoShopperStatement)\n    }\n}\n\nexport const presentToShopper = customPaymentProperties => {\n    const checkoutBoleto = store.get(constants.checkout.boleto)\n    const options = { action: customPaymentProperties, selector: '#present-shopper', checkoutComponent: checkoutBoleto }\n\n    createPresentToShopperModal(() => {\n        createFromAction(options)\n    })\n}\n\nconst createBoletoCheckout = () => {\n    const checkout = new Checkout(constants.paymentMethodTypes.invoice)\n    const onChange = checkout.onChange({\n        deliveryDate: addDays(store.get(constants.boleto.deliveryDate)),\n        shopperStatement: store.get(constants.boleto.shopperStatement),\n    })\n\n    const onSubmit = checkout.onSubmit()\n\n    const configuration = { onSubmit, onChange }\n    const order = store.get(constants.order)\n\n    const address = order().billingAddress()\n\n    const shopperName = { firstName: address.firstName(), lastName: address.lastName() }\n    const billingAddress = {\n        city: address.city(),\n        country: address.selectedCountry(),\n        // houseNumberOrName:\"952\",\n        postalCode: address.postalCode(),\n        stateOrProvince: address.selectedState(),\n        street: address.address1(),\n    }\n    const options = { data: { shopperName, billingAddress } }\n    const checkoutOptions = { configuration, selector: '#adyen-boleto-payment', type: 'boletobancario', options }\n\n    checkout.createCheckout(checkoutOptions, checkout => {\n        eventEmitter.store.emit(constants.checkout.boleto, checkout)\n    })\n}\n\nexport default createBoletoCheckout\n","import { store } from '../index'\nimport * as constants from '../../constants'\nimport { Checkout, eventEmitter, getInstallmentOptions } from '../../utils'\n\nexport const onBrand = ({ brand }) => {\n    eventEmitter.store.emit(constants.selectedBrand, brand)\n    const installmentsOptions = store.get(constants.installmentsOptions)\n    const cart = store.get(constants.cart)\n    const amount = cart().amount()\n    const installments = installmentsOptions ? getInstallmentOptions(installmentsOptions, amount, brand) : []\n\n    eventEmitter.store.emit(constants.installments, installments)\n}\n\nexport const onConfigSuccess = () => eventEmitter.store.emit(constants.isLoaded, true)\n\nconst createCardCheckout = () => {\n    const checkout = new Checkout(constants.paymentMethodTypes.generic)\n    const onChange = checkout.onChange()\n    const onSubmit = checkout.onSubmit()\n\n    const storedPaymentType = store.get(constants.storedPaymentType)\n    const options = { hasHolderName: false, enableStoreDetails: !!storedPaymentType() }\n\n    const configuration = { onBrand, onConfigSuccess, onChange, onSubmit }\n    const checkoutOptions = { configuration, selector: '#adyen-card-payment', type: 'card', options }\n\n    checkout.createCheckout(checkoutOptions, checkout => {\n        eventEmitter.store.emit(constants.checkout.card, checkout)\n    })\n}\n\nexport default createCardCheckout\n","import * as constants from '../../constants'\nimport { Checkout, eventEmitter } from '../../utils'\n\nconst hasType = paymentMethod => 'type' in paymentMethod\nconst isNotScheme = paymentMethod => hasType(paymentMethod) && paymentMethod.type !== 'scheme'\nconst hasDetails = paymentMethod => isNotScheme(paymentMethod) && 'details' in paymentMethod\nconst hasOneItem = paymentMethod => hasDetails(paymentMethod) && paymentMethod.details.length === 1\nconst getDetail = paymentMethod => hasOneItem(paymentMethod) && paymentMethod.details[0]\nconst isValid = (paymentMethod, key, value) => getDetail(paymentMethod) && getDetail(paymentMethod)[key] === value\n\nconst isLocalPaymentMethod = paymentMethod => {\n    const isIssuer = isValid(paymentMethod, 'key', 'issuer')\n    const isSelect = isValid(paymentMethod, 'type', 'select')\n    const isLocal = isIssuer && isSelect\n\n    return isLocal\n}\n\nconst createLocalComponent = ({ type, name }) => {\n    const headingNode = document.createElement('div')\n    headingNode.classList.add('collapse-heading')\n    headingNode.innerHTML = ` <strong>\n        <span\n            class=\"collapse-toggle collapsed\"\n            data-toggle=\"collapse\"\n            data-target=\"#adyen-${type}-wrapper\"\n        >\n          <button>${name}</button>\n        </span>\n      </strong>`\n    const component = document.createElement('div')\n    component.setAttribute('id', `adyen-${type}-wrapper`)\n    component.classList.add('adyen-wrapper', 'collapse')\n\n    component.innerHTML = `\n        <div class=\"loader-wrapper hide\">\n            <div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n            <div style=\"font-weight: bold; font-size: 16px;\">Processing...</div>\n        </div>\n        <div id=\"adyen-${type}-payment\" class=\"adyen-component\"></div>\n    `\n    const adyenNode = document.getElementById('adyen-collapse-heading')\n    adyenNode.appendChild(headingNode)\n    adyenNode.appendChild(component)\n    return adyenNode\n}\n\nconst createLocalCheckout = (acc, localPaymentMethod) => {\n    const { type } = localPaymentMethod\n    const checkout = new Checkout(type)\n    const onChange = checkout.onChange()\n    const onSubmit = checkout.onSubmit()\n\n    const configuration = { onSubmit, onChange, showPayButton: true }\n\n    createLocalComponent(localPaymentMethod)\n    const checkoutOptions = type => ({ configuration, selector: `#adyen-${type}-payment`, type })\n    checkout.createCheckout(checkoutOptions(type), checkout => ({ ...acc, [type]: checkout }))\n}\n\nconst createLocalPaymentCheckout = ({ paymentMethods }) => {\n    const localPaymentMethods = paymentMethods.filter(isLocalPaymentMethod)\n    const localPaymentMethodsCheckout = localPaymentMethods.reduce(createLocalCheckout, {})\n\n    eventEmitter.store.emit(constants.checkout.local, localPaymentMethodsCheckout)\n}\n\nexport default createLocalPaymentCheckout\n","import pubsub from 'pubsub'\nimport notifier from 'notifier'\nimport $ from 'jquery'\nimport { store } from './components'\nimport { createSpinner, destroySpinner, eventEmitter } from './utils'\nimport createError from './utils/createError'\nimport * as constants from './constants'\nimport { presentToShopper, setBoletoConfig } from './components'\n\nclass ViewModel {\n    store = store\n\n    setGatewaySettings = ({\n        installmentsOptionsId,\n        environment,\n        storedPayment,\n        boletoDeliveryDate,\n        boletoShopperStatement,\n        paymentMethodTypes,\n    }) => {\n        eventEmitter.store.emit(constants.environment, environment)\n\n        store.get(constants.isAllowedCountryForInstallments) && this.setInstallments(installmentsOptionsId)\n        eventEmitter.store.emit(constants.storedPaymentType, storedPayment)\n\n        setBoletoConfig({\n            boletoDeliveryDate: Number(boletoDeliveryDate),\n            boletoShopperStatement,\n            paymentMethodTypes,\n        })\n    }\n\n    setSiteSettings = () => {\n        this.setSiteCountryAndCurrency()\n\n        const { AdyenGenericGateway } = this.site().extensionSiteSettings\n        this.setGatewaySettings(AdyenGenericGateway)\n    }\n\n    setInstallments = installmentsOptions => {\n        try {\n            eventEmitter.store.emit(constants.installmentsOptions, JSON.parse(installmentsOptions))\n        } catch (e) {\n            const translate = store.get(constants.translate)\n            const { installmentsConfiguration } = constants.errorMessages\n            const errMsg = translate(installmentsConfiguration)\n            notifier.sendError('installments', errMsg, true)\n        }\n    }\n\n    setSiteCountryAndCurrency = () => {\n        const { brazil } = constants.countries\n        const { currency, locale } = brazil\n\n        const siteLocale = store.get(constants.locale).toLowerCase()\n        const currencyCode = this.cart().currencyCode()\n        const localeIsBr = locale === siteLocale\n        const curIsBr = currencyCode.toLowerCase() === currency\n\n        eventEmitter.store.emit(constants.brazilEnabled, localeIsBr && curIsBr)\n    }\n\n    handlePageChanged = pageData => {\n        const isCheckout = pageData.pageId === 'checkout'\n        isCheckout && eventEmitter.order.emit(constants.pageChanged, pageData)\n    }\n\n    beforeAppear = () => {\n        this.reset()\n    }\n\n    onLoad = widget => {\n        store.init(widget)\n        Object.assign(this, widget, { store })\n\n        this.setSiteSettings()\n        this.subscribeToTopics()\n    }\n\n    onRender = () => {\n        eventEmitter.component.emit(constants.render)\n    }\n\n    reset = () => {\n        eventEmitter.store.emit(constants.installments, [])\n    }\n\n    orderSubmitted = () => {\n        if (store.has(constants.orderPayload)) {\n            const { resultCode, customPaymentProperties } = store.get(constants.orderPayload)\n            const isPresentToShopper = resultCode === constants.presentToShopper\n            isPresentToShopper && presentToShopper(customPaymentProperties)\n        }\n    }\n\n    subscribeToTopics = () => {\n        const {\n            ORDER_CREATED_INITIAL,\n            ORDER_CREATE,\n            ORDER_SUBMISSION_FAIL,\n            ORDER_COMPLETED,\n            ORDER_CREATED,\n            PAGE_CHANGED,\n            ORDER_SUBMISSION_SUCCESS,\n            NOTIFICATION_ADD,\n        } = pubsub.topicNames\n\n        const emitInitialOrder = ev => {\n            eventEmitter.order.emit(constants.initialOrderCreated, ev)\n        }\n        $.Topic(ORDER_CREATED_INITIAL).subscribe(emitInitialOrder)\n        $.Topic(ORDER_CREATE).subscribe(createSpinner)\n\n        const redirectLink = this.order().checkoutLink\n        const errorCallback = createError({ redirectLink })\n\n        $.Topic(ORDER_SUBMISSION_FAIL).subscribe(errorCallback)\n        $.Topic(ORDER_COMPLETED).subscribe(destroySpinner)\n        $.Topic(ORDER_CREATED).subscribe(this.reset)\n        $.Topic(PAGE_CHANGED).subscribe(this.handlePageChanged)\n        $.Topic(ORDER_SUBMISSION_SUCCESS).subscribe(this.orderSubmitted)\n\n        const hideLoaders = () => {\n            const toggleElementAttribute = el => el.classList.toggle('hide', true)\n            document.querySelectorAll('.loader-wrapper').forEach(toggleElementAttribute)\n        }\n\n        $.Topic(NOTIFICATION_ADD).subscribe(hideLoaders)\n    }\n}\n\nconst vm = new ViewModel()\nexport default vm\n"],"names":["baseAPIUrl","channels","preview","storefront","errorMessages","paymentRefused","installmentsConfiguration","failed3dsValidation","paymentMethodTypes","generic","invoice","local","adyenCheckoutComponentUrl","locale","countries","brazil","currency","mexico","brazilEnabled","comboCards","debit","credit","bins","electron","maestro","storage","paymentData","order","noInstallmentsMsg","render","id","checkout","card","boleto","isLoaded","ajax","originKey","installments","cart","setPayment","initialOrderCreated","pageChanged","isAllowedCountryForInstallments","environment","selectedBrand","selectedComboCard","installmentsOptions","storedPaymentType","paymentMethodsResponse","translate","isPaymentStored","paymentDetails","selectedInstallment","comboCardOptions","genericPayment","isDone","isValid","presentToShopper","orderPayload","enabled","deliveryDate","shopperStatement","createSpinner","indicatorOptions","parent","posTop","posLeft","loadingText","$","removeClass","show","spinner","create","destroySpinner","hide","destroy","isPreview","path","cb","method","url","headers","channel","success","customPaymentProperties","checkoutCard","store","get","constants","isAuthRedirect","redirect","action","selector","checkoutComponent","instance","storageApi","getInstance","setItem","JSON","stringify","createFromAction","getOrderPayload","shippingAddressFn","shippingAddress","billingAddressFn","billingAddress","payments","orderProfileId","shippingMethod","shoppingCart","combineLineItems","op","profileId","Emitter","emit","key","value","Topic","publish","listen","subscribe","suffix","event","args","on","_ev","creditCards","name","code","isAllowedCreditCard","creditCard","creditCardSum","parseInt","checkSum","checkAmount","amount","amountRange","validate","hasValidSum","isValidAmount","getInstallmentOptions","brand","find","createInstallmentsObj","item","numberOfInstallments","map","filter","valid","getDefaultConfig","showPayButton","toLowerCase","mount","Checkout","type","configuration","options","defaultConfiguration","AdyenCheckout","loader","document","querySelector","classList","toggle","eventEmitter","payment","ccConstants","ORDER_OP_INITIATE","handlePlaceOrder","state","component","data","payload","createPresentToShopperModal","node","createElement","setAttribute","wrapper","modal","clickEvent","removeEventListener","remove","addEventListener","innerHTML","appendChild","body","createError","preserveUrl","errorMessage","navigation","goTo","redirectLink","notifier","sendError","addDays","days","Date","setDate","getDate","Component","getComboCardOptions","brands","visa","mastercard","isDebitCard","getBrand","additionalData","overwriteBrand","originKeysRes","origin","window","location","originKeys","getPaymentMethods","getOriginKeysSuccessResponse","getScript","createCardCheckout","createLocalPaymentCheckout","createBoletoCheckout","startEventListeners","Order","getUrlParametersAndCreateOrder","orderEvent","resultCode","parse","redirectAuth","createOrder","result","getItem","customProperties","recreateOrder","orderFail","message","pubsub","topicNames","ORDER_SUBMISSION_FAIL","completeOrder","uuid","publishData","ORDER_COMPLETED","ORDER_SUBMISSION_SUCCESS","submitOrder","orderIsCompleted","completedPayload","orderSuccess","paymentState","PAYMENT_GROUP_STATE_AUTHORIZED","PAYMENT_GROUP_STATE_INITIAL","validPaymentGroups","includes","ccRestClient","request","ENDPOINT_ORDERS_CREATE_ORDER","storedOrder","urlParameters","params","split","formatResult","acc","param","decodeURIComponent","reduce","pageData","parameters","parametersObj","getResult","cleanPaymentGatewayType","setAction","paymentGateway","is3DS","checkIf3ds","isLocal","checkIfLocal","hasDetails","isAction","hasParameters","getAndCreatOrder","Payment","updatedGenericPayment","updatePayments","updatePayment","createPayment","pPayment","checkId","curId","setPayments","index","curPayment","isSameId","newPayments","hasInstallments","checkSelectedInstallment","isCreditCard","validateInstallment","storedPayment","getStoredPayment","getInstallments","Store","ko","observable","undefined","has","viewModel","length","cardIsCredit","installmentsAllowedCountries","setDeliveryDate","boletoDeliveryDate","setShopperStatement","boletoShopperStatement","setBoletoConfig","hasBoleto","checkoutBoleto","onChange","onSubmit","address","shopperName","firstName","lastName","city","country","selectedCountry","postalCode","stateOrProvince","selectedState","street","address1","checkoutOptions","createCheckout","onBrand","onConfigSuccess","hasHolderName","enableStoreDetails","hasType","paymentMethod","isNotScheme","hasOneItem","details","getDetail","isLocalPaymentMethod","isIssuer","isSelect","createLocalComponent","headingNode","add","adyenNode","getElementById","createLocalCheckout","localPaymentMethod","paymentMethods","localPaymentMethods","localPaymentMethodsCheckout","ViewModel","installmentsOptionsId","setInstallments","Number","setSiteCountryAndCurrency","AdyenGenericGateway","site","extensionSiteSettings","setGatewaySettings","e","errMsg","siteLocale","currencyCode","localeIsBr","curIsBr","isCheckout","pageId","reset","widget","init","Object","assign","setSiteSettings","subscribeToTopics","isPresentToShopper","ORDER_CREATED_INITIAL","ORDER_CREATE","ORDER_CREATED","PAGE_CHANGED","NOTIFICATION_ADD","emitInitialOrder","ev","checkoutLink","errorCallback","handlePageChanged","orderSubmitted","hideLoaders","toggleElementAttribute","el","querySelectorAll","forEach","vm"],"mappings":"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"}